(function(u){function Ea(a,b){return b}function Fa(a){return a}function Ga(a,b){return[b,a]}function ha(){}function Ha(a,b){return a+b}function Ia(a,b){b.forEach(Ja,a);return a}function Ja(a){this.push(a)}function wa(a){return a}function xa(a,b,d){this.array=a;this.start=null==b?0:b;this.end=d}function s(a,b){if(!(this instanceof s))return new s(a,b);this.content=b||Function.noop;this.store={};this.length=0;this.addEach(a)}function f(a){if(!(this instanceof f))return new f(a);if(Array.isArray(a)||
"string"===typeof a)return f.iterate(a);a=Object(a);if(a instanceof f)return a;if(a.next)this.next=function(){return a.next()};else if(a.iterate){var b=a.iterate();this.next=function(){return b.next()}}else if("[object Function]"===Object.prototype.toString.call(a))this.next=a;else throw new TypeError("Cannot iterate");}function i(a,b,d){if(!(this instanceof i))return new i(a,b,d);var e=this.head=new this.Node;e.next=e;e.prev=e;this.contentEquals=b||Object.equals;this.content=d||Function.noop;this.length=
0;this.addEach(a)}function ya(a){this.head=a;this.at=a.next}function ia(a){this.value=a;this.next=this.prev=null}function k(a,b,d,e){if(!(this instanceof k))return new k(a,b,d);b=b||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentEquals=b;this.contentHash=d;this.content=e;this.buckets=new this.Buckets(null,this.Bucket);this.length=0;this.addEach(a)}function n(a,b,d,e){if(!(this instanceof n))return new n(a,b,d);b=b||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentEquals=
b;this.contentHash=d;this.content=e;this.contentSet=new Ka(void 0,function(a,d){return b(a.key,d.key)},function(a){return d(a.key)});this.length=0;this.addEach(a)}function l(a,b,d,e){if(!(this instanceof l))return new l(a,b,d);b=b||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentEquals=b;this.contentHash=d;this.contentList=new La(void 0,b);this.content=e;this.contentSet=new Ma(void 0,function(a,d){return b(a.value,d.value)},function(a){return d(a.value)});this.length=0;this.addEach(a)}
function m(a,b,d,e,c){if(!(this instanceof m))return new m(a,b,d,e);b=b||Infinity;d=d||Object.equals;e=e||Object.hash;c=c||Function.noop;this.contentSet=new Na(void 0,d,e);this.contentEquals=d;this.contentHash=e;this.content=c;this.maxLength=b;this.length=0;this.addEach(a)}function o(a,b,d,e,c){if(!(this instanceof o))return new o(a,b,d,e);d=d||Object.equals;e=e||Object.hash;c=c||Function.noop;this.contentEquals=d;this.contentHash=e;this.content=c;this.contentSet=new Oa(void 0,b,function(a,b){return d(a.key,
b.key)},function(a){return e(a.key)});this.length=0;this.addEach(a)}function p(a,b,d,e){if(!(this instanceof p))return new p(a,b,d);b=b||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentEquals=b;this.contentHash=d;this.content=e;this.contentSet=new Pa(void 0,function(a,d){return b(a.key,d.key)},function(a){return d(a.key)});this.length=0;this.addEach(a)}function E(a,b,d,e){if(!(this instanceof E))return new E(a,b,d,e);this.bucket=b||this.bucket;na.call(this,a,d,e,function(a){var b=this.bucket();
na.prototype.set.call(this,a,b);return b})}function j(a,b,d,e){if(!(this instanceof j))return new j(a,b,d,e);Array.isArray(a)?(this.array=a,a=a.splice(0,a.length)):this.array=[];this.contentEquals=b||Object.equals;this.contentCompare=d||Object.compare;this.content=e||Function.noop;this.length=0;this.addEach(a)}function ja(a,b,d){for(var e=0,c=a.length-1;e<=c;){var q=e+c>>1,f=d(b,a[q]);if(0<f)e=q+1;else if(0>f)c=q-1;else return q}return-(e+1)}function oa(a,b,d,e){d=ja(a,b,d);if(0>d)return-1;for(;0<
d&&e(b,a[d-1]);)d--;return e(b,a[d])?d:-1}function aa(a,b,d,e){if(!(this instanceof aa))return new aa(a,b,d,e);pa.call(this,a,b,d,e)}function t(a,b,d,e){if(!(this instanceof t))return new t(a,b,d,e);b=b||Object.equals;d=d||Object.compare;e=e||Function.noop;this.contentEquals=b;this.contentCompare=d;this.content=e;this.contentSet=new Qa(null,function(a,d){return b(a.key,d.key)},function(a,b){return d(a.key,b.key)});this.length=0;this.addEach(a)}function h(a,b,d,e){if(!(this instanceof h))return new h(a,
b,d,e);this.contentEquals=b||Object.equals;this.contentCompare=d||Object.compare;this.content=e||Function.noop;this.root=null;this.length=0;this.addEach(a)}function x(a){this.value=a;this.right=this.left=null;this.length=1}function za(a,b,d){this.set=a;this.prev=null;this.end=d;if(b&&(a=this.set.findLeastGreaterThanOrEqual(b)))this.set.splay(a.value),this.prev=a.getPrevious()}function r(a,b,d,e){if(!(this instanceof r))return new r(a,b,d,e);b=b||Object.equals;d=d||Object.compare;e=e||Function.noop;
this.contentEquals=b;this.contentCompare=d;this.content=e;this.contentSet=new Ra(null,function(a,d){return b(a.key,d.key)},function(a,b){return d(a.key,b.key)});this.length=0;this.addEach(a)}var D={},w=D.module$exports={};w.addEach=function(a){a&&Object(a)===a&&("function"===typeof a.forEach?"function"===typeof a.keys?a.forEach(function(a,d){this.set(d,a)},this):a.forEach(function(a){this.set(a[0],a[1])},this):Object.keys(a).forEach(function(b){this.set(b,a[b])},this))};w.get=function(a,b){var d=
this.contentSet.get(new this.Item(a));return d?d.value:1<arguments.length?b:this.content(a)};w.set=function(a,b){var d=new this.Item(a,b),e=this.contentSet.get(d),c=!1;e?e.value=b:this.contentSet.add(d)&&(this.length++,c=!0);return c};w.has=function(a){return this.contentSet.has(new this.Item(a))};w["delete"]=function(a){return this.contentSet["delete"](new this.Item(a))?(this.length--,!0):!1};w.clear=function(){this.contentSet.clear();this.length=0};w.reduce=function(a,b,d){return this.contentSet.reduce(function(b,
c){return a.call(d,b,c.value,c.key,this)},b,this)};w.reduceRight=function(a,b,d){return this.contentSet.reduceRight(function(b,c){return a.call(d,b,c.value,c.key,this)},b,this)};w.keys=function(){return this.map(Ea)};w.values=function(){return this.map(Fa)};w.items=function(){return this.map(Ga)};w.Item=function(a,b){this.key=a;this.value=b};D.module$exports&&(D=D.module$exports);var R={};R.module$exports=ha;ha.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",
fromBoth:"+",strafe:"|"};ha.unicodeRound={intersection:"\u254b",through:"\u2501",branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u256d",fromAbove:"\u2570",fromBoth:"\u2523",strafe:"\u2503"};ha.unicodeSharp={intersection:"\u254b",through:"\u2501",branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u250f",fromAbove:"\u2517",fromBoth:"\u2523",strafe:"\u2503"};R.module$exports&&(R=R.module$exports);var F={},Sa=F,qa;if("undefined"!==typeof WeakMap)qa=WeakMap;else{var ka=function(a){a.prototype=null;return Object.freeze(a)},
Aa=Object.getOwnPropertyNames,S=Object.defineProperty,ra={};Aa(Object).forEach(function(a){ra[a]=Object[a]});var ba="ident:"+Math.random()+"___";if("undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array){var la=new ArrayBuffer(25),la=new Uint8Array(la);crypto.getRandomValues(la);ba="rand:"+Array.prototype.map.call(la,function(a){return(a%36).toString(36)}).join("")+"___"}S(Object,"getOwnPropertyNames",{value:function(a){return Aa(a).filter(function(a){return a!==
ba})}});"getPropertyNames"in Object&&S(Object,"getPropertyNames",{value:function(a){return ra.getPropertyNames(a).filter(function(a){return a!==ba})}});var G=function(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[ba];if(b&&b.key===a)return b;if(ra.isExtensible(a))return b={key:a,gets:[],vals:[]},S(a,ba,{value:b,writable:!1,enumerable:!1,configurable:!1}),b},Ta=Object.freeze;S(Object,"freeze",{value:function(a){G(a);return Ta(a)}});var Ua=Object.seal;S(Object,"seal",{value:function(a){G(a);
return Ua(a)}});var Va=Object.preventExtensions;S(Object,"preventExtensions",{value:function(a){G(a);return Va(a)}});var sa=function(){function a(e,c){var q=G(e),f;q?(f=q.gets.indexOf(a),q=q.vals):(f=b.indexOf(e),q=d);return 0<=f?q[f]:c}var b=[],d=[];return Object.create(sa.prototype,{get___:{value:ka(a)},has___:{value:ka(function(d){var c=G(d);return 0<=(c?c.gets.indexOf(a):b.indexOf(d))})},set___:{value:ka(function(e,c){var q=G(e),f;q?(f=q.gets.indexOf(a),0<=f?q.vals[f]=c:(q.gets.push(a),q.vals.push(c))):
(f=b.indexOf(e),0<=f?d[f]=c:(b.push(e),d.push(c)))})},delete___:{value:ka(function(e){var c=G(e);c?(e=c.gets.indexOf(a),0<=e&&(c.gets.splice(e,1),c.vals.splice(e,1))):(e=b.indexOf(e),0<=e&&(b.splice(e,1),d.splice(e,1)));return!0})}})};sa.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){this.set___(a,b)},writable:!0,configurable:!0},
"delete":{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}});qa=sa}Sa.module$exports=qa;F.module$exports&&(F=F.module$exports);var v={},Wa=F;v.module$exports=Object;Object.empty=Object.freeze(Object.create(null));Object.isObject=function(a){return Object(a)===a};Object.getValueOf=function(a){Object.can(a,"valueOf")&&(a=a.valueOf());return a};var ta=new Wa;Object.hash=function(a){return Object.can(a,"hash")?""+a.hash():Object(a)===a?(ta.has(a)||ta.set(a,Math.random().toString(36).slice(2)),
ta.get(a)):""+a};var Ba=Object.prototype.hasOwnProperty;Object.owns=function(a,b){return Ba.call(a,b)};Object.can=function(a,b){return null!=a&&"function"===typeof a[b]&&!Ba.call(a,b)};Object.has=function(a,b){if("object"!==typeof a)throw Error("Object.has can't accept non-object: "+typeof a);if(Object.can(a,"has"))return a.has(b);if("string"===typeof b)return b in a&&a[b]!==Object.prototype[b];throw Error("Key must be a string for Object.has on plain objects");};Object.get=function(a,b,d){if("object"!==
typeof a)throw Error("Object.get can't accept non-object: "+typeof a);return Object.can(a,"get")?a.get(b,d):Object.has(a,b)?a[b]:d};Object.set=function(a,b,d){Object.can(a,"set")?a.set(b,d):a[b]=d};Object.addEach=function(a,b){"function"===typeof b.forEach?"function"===typeof b.keys?b.forEach(function(b,c){a[c]=b}):b.forEach(function(b){a[b[0]]=b[1]}):Object.keys(b).forEach(function(d){a[d]=b[d]})};Object.forEach=function(a,b,d){Object.keys(a).forEach(function(c){b.call(d,a[c],c,a)})};Object.map=
function(a,b,d){return Object.keys(a).map(function(c){return b.call(d,a[c],c,a)})};Object.values=function(a){return Object.map(a,Function.identity)};Object.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};Object.equals=function(a,b){a=Object.getValueOf(a);b=Object.getValueOf(b);return a===b?0!==a||1/a===1/b:Object.can(a,"equals")?a.equals(b):Object.can(b,"equals")?b.equals(a):a!==a&&b!==b};Object.compare=function(a,b){a=Object.getValueOf(a);b=Object.getValueOf(b);return a===b?0:"number"===
typeof a&&"number"===typeof b?a-b:"string"===typeof a?a<b?-1:1:Object.can(a,"compare")?a.compare(b):Object.can(b,"compare")?-b.compare(a):0};Object.clone=function(a,b,d){a=Object.getValueOf(a);if(void 0===b)b=Infinity;else if(0===b)return a;return d&&Object.isObject(a)&&Object.can(a,"clone")?(d.has(a)||d.set(a,a.clone(b,d)),d.get(a)):a};Object.clear=function(a){if(Object.can(a,"clear"))a.clear();else for(var b=Object.keys(a),d=b.length;d;)d--,delete a[b[d]];return a};Function.noop=function(){};Function.identity=
function(a){return a};v.module$exports&&(v=v.module$exports);var H,I,J,K,L,M,N,ua=new F;H=function(){ua.has(this)||ua.set(this,{isActive:!1,changeListeners:[],willChangeListeners:[]});return ua.get(this)};I=function(a,b){!this.isObservable&&this.makeObservable&&this.makeObservable();var d=this.getContentChangeDescriptor(),d=b?d.willChangeListeners:d.changeListeners;d.push(a);this.isObserved=!!d.length};J=function(a,b){var d=this.getContentChangeDescriptor(),d=b?d.willChangeListeners:d.changeListeners,
c=d.lastIndexOf(a);if(-1===c)throw Error("Can't remove listener: does not exist.");d.splice(c,1);this.isObserved=!!d.length};K=function(a,b,d,c){var g=this.getContentChangeDescriptor();if(!g.isActive){g.isActive=!0;var q;q=c?g.willChangeListeners:g.changeListeners;try{q.forEach(function(g){g.handleEvent?g.handleEvent({phase:c?"before":"after",currentTarget:this,target:this,plus:a,minus:b,index:d}):(g=c?g.handleContentWillChange||g:g.handleContentChange||g,g.call&&g.call(this,a,b,d,c))},this)}finally{g.isActive=
!1}}};L=function(a){return this.addContentChangeListener(a,!0)};M=function(a){return this.removeContentChangeListener(a,!0)};N=function(a,b,d){return this.dispatchContentChange(a,b,d,!0)};var c={};v;c.addEach=function(a){if(a&&Object(a)===a)if("function"===typeof a.forEach)a.forEach(this.add,this);else if("number"===typeof a.length)for(var b=0;b<a.length;b++)this.add(a[b],b);else Object.keys(a).forEach(function(b){this.add(a[b],b)},this)};c.forEach=function(a,b){return this.reduce(function(d,c,g,
q,f){a.call(b,c,g,q,f)},void 0)};c.map=function(a,b){var d=[];this.reduce(function(c,g,q,f,h){d.push(a.call(b,g,q,f,h))},void 0);return d};c.toArray=function(){return this.map(wa)};c.toObject=function(){var a={};this.reduce(function(b,d,c){a[c]=d},void 0);return a};c.filter=function(a,b){var d=this.constructClone();this.reduce(d,function(c,g,q,f,h){a.call(b,g,q,f,h)&&d.push(g)},void 0);return d};c.every=function(a,b){return this.reduce(function(d,c,g,q,f){return d&&a.call(b,c,g,q,f)},!0)};c.some=
function(a,b){return this.reduce(function(d,c,g,f,h){return d||a.call(b,c,g,f,h)},!1)};c.all=function(){return this.every(Boolean)};c.any=function(){return this.some(Boolean)};c.min=function(a){a=this.contentCompare||Object.compare;return this.reduce(function(b,d){return 0>a(d,b)?d:b},Infinity)};c.max=function(a){a=this.contentCompare||Object.compare;return this.reduce(function(b,d){return 0<a(d,b)?d:b},-Infinity)};c.sum=function(a){return this.reduce(Ha,void 0===a?0:a)};c.average=function(a){var b=
void 0===a?0:a,d=void 0===a?0:a;this.reduce(function(a,c){b+=c;d+=1},void 0);return b/d};c.concat=function(){for(var a=this.constructClone(this),b=0;b<arguments.length;b++)a.addEach(arguments[b]);return a};c.flatten=function(){return this.reduce(Ia,this.constructClone())};c.zip=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this);for(var b=[],d=Infinity,c=0;c<a.length;c++){var g=a[c];g.length<d&&(d=g.length)}for(c=0;c<a.length;c++){var f=0;a[c].reduce(function(a,g){f<d&&(b[f]=b[f]||
[],b[f][c]=g);f++},void 0)}return b};c.sorted=function(a,b,d){a=a||this.contentCompare||Object.compare;a.by?(b=a.by,a=a.compare||this.contentCompare||Object.compare):b=b||wa;void 0===d&&(d=1);return this.map(function(a){return{by:b(a),value:a}}).sort(function(b,c){return a(b.by,c.by)*d}).map(function(a){return a.value})};c.reversed=function(){return this.constructClone(this).reverse()};c.clone=function(a,b){if(void 0===a)a=Infinity;else if(0===a)return this;var d=this.constructClone();this.forEach(function(c,
g){Object.clone&&(c=Object.clone(c,a-1,b));d.set(g,c)},this);return d};var Ca={},va=Object.prototype.toString;Array.isArray||(Array.isArray=function(a){return"[object Array]"==va.call(a)});Array.prototype.forEach||(Array.prototype.forEach=c.forEach);Array.prototype.map||(Array.prototype.map=c.map);Array.prototype.filter||(Array.prototype.filter=c.filter);Array.prototype.every||(Array.prototype.every=c.every);Array.prototype.some||(Array.prototype.some=c.some);Array.prototype.reduce||(Array.prototype.reduce=
function(a){var b=toObject(this),d=b.length>>>0;if("[object Function]"!=va.call(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var c=0,g;if(2<=arguments.length)g=arguments[1];else{do{if(c in b){g=b[c++];break}if(++c>=d)throw new TypeError("reduce of empty array with no initial value");}while(1)}for(;c<d;c++)c in b&&(g=a.call(void 0,g,b[c],c,b));return g});Array.prototype.reduceRight||(Array.prototype.reduceRight=
function(a){var b=toObject(this),d=b.length>>>0;if("[object Function]"!=va.call(a))throw new TypeError(a+" is not a function");if(!d&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var c,d=d-1;if(2<=arguments.length)c=arguments[1];else{do{if(d in b){c=b[d--];break}if(0>--d)throw new TypeError("reduceRight of empty array with no initial value");}while(1)}do d in this&&(c=a.call(void 0,c,b[d],d,b));while(d--);return c});Array.prototype.indexOf||(Array.prototype.indexOf=
function(a){var b=toObject(this),d=b.length>>>0;if(!d)return-1;var c=0;1<arguments.length&&(c=toInteger(arguments[1]));for(c=0<=c?c:Math.max(0,d+c);c<d;c++)if(c in b&&b[c]===a)return c;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){var b=toObject(this),d=b.length>>>0;if(!d)return-1;var c=d-1;1<arguments.length&&(c=Math.min(c,toInteger(arguments[1])));for(c=0<=c?c:d-Math.abs(c);0<=c;c--)if(c in b&&a===b[c])return c;return-1});var T={};Ca;v;T.module$exports=Array;Array.empty=
[];Object.freeze&&Object.freeze(Array.empty);Array.from=function(a){var b=[];b.addEach(a);return b};Array.prototype.constructClone=function(a){var b=new this.constructor;b.addEach(a);return b};Array.prototype.has=function(a,b){return-1!==this.find(a,b)};Array.prototype.get=function(a){if(+a!==a)throw Error("Indicies must be numbers");return this[a]};Array.prototype.set=function(a,b){this.splice(a,1,b);return!0};Array.prototype.add=function(a){this.push(a);return!0};Array.prototype["delete"]=function(a,
b){var d=this.find(a,b);return-1!==d?(this.splice(d,1),!0):!1};Array.prototype.find=function(a,b){for(var b=b||this.contentEquals||Object.equals,d=0;d<this.length;d++)if(d in this&&b(this[d],a))return d;return-1};Array.prototype.findLast=function(a,b){var b=b||this.contentEquals||Object.equals,d=this.length;do if(d--,d in this&&b(this[d],a))return d;while(0<d);return-1};Array.prototype.swap=function(a,b,d){var c=Array.prototype.slice.call(arguments,0,2);d&&c.push.apply(c,d);return this.splice.apply(this,
c)};Array.prototype.toArray=c.toArray;Array.prototype.toObject=c.toObject;Array.prototype.addEach=c.addEach;Array.prototype.equals=c.equals;Array.prototype.compare=c.compare;Array.prototype.any=c.any;Array.prototype.all=c.all;Array.prototype.min=c.min;Array.prototype.max=c.max;Array.prototype.sum=c.sum;Array.prototype.average=c.average;Array.prototype.unique=c.unique;Array.prototype.flatten=c.flatten;Array.prototype.sorted=c.sorted;Array.prototype.reversed=c.reversed;Array.prototype.clone=c.clone;
Array.prototype.one=function(){if(0===this.length)throw Error("Can't get one element from empty array");return this[0]};Array.prototype.only=function(){if(1!==this.length)throw Error("Can't get only element of array with "+this.length+" elements.");return this[0]};Array.prototype.clear=function(){this.length=0;return this};Array.prototype.iterate=function(a,b){return new xa(this,a,b)};xa.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]};
T.module$exports&&(T=T.module$exports);var U={};v;var ma=D;U.module$exports=s;s.prototype.constructClone=function(a){return new this.constructor(a,this.mangle,this.content)};s.prototype.assertString=function(a){if("string"!==typeof a)throw new TypeError("key must be a string.");};s.prototype.get=function(a,b){this.assertString(a);var d="~"+a;return d in this.store?this.store[d]:1<arguments.length?b:this.content()};s.prototype.set=function(a,b){this.assertString(a);var d="~"+a;if(d in this.store)return this.store[d]=
b,!1;this.length++;this.store[d]=b;return!0};s.prototype.has=function(a){this.assertString(a);return"~"+a in this.store};s.prototype["delete"]=function(a){this.assertString(a);return"~"+a in this.store?(delete this.store["~"+a],this.length--,!0):!1};s.prototype.clear=function(){for(var a in this.store)delete this.store[a];this.length=0};s.prototype.reduce=function(a,b,d){for(var c in this.store)b=a.call(d,b,this.store[c],c.slice(1),this);return b};s.prototype.addEach=ma.addEach;s.prototype.keys=ma.keys;
s.prototype.values=ma.values;s.prototype.items=ma.items;s.prototype.forEach=c.forEach;s.prototype.map=c.map;s.prototype.toArray=c.toArray;s.prototype.toObject=c.toObject;s.prototype.filter=c.filter;s.prototype.every=c.every;s.prototype.some=c.some;s.prototype.all=c.all;s.prototype.any=c.any;s.prototype.min=c.min;s.prototype.max=c.max;s.prototype.sum=c.sum;s.prototype.average=c.average;s.prototype.concat=c.concat;s.prototype.flatten=c.flatten;s.prototype.sorted=c.sorted;s.prototype.zip=c.zip;s.prototype.clone=
c.clone;U.module$exports&&(U=U.module$exports);var V={};V.module$exports=f;f.prototype.constructClone=function(a){var b=[];c.addEach.call(b,a);return b};f.prototype.mapIterator=function(a,b){var d=f(this),c=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new d.constructor(function(){return a.call(b,d.next(),c++,d)})};f.prototype.filterIterator=function(a,b){var d=f(this),c=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new d.constructor(function(){for(var g;;)if(g=
d.next(),a.call(b,g,c++,d))return g})};f.prototype.reduce=function(a){var b=f(this),d=arguments[1],c=arguments[2],g=0,q;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;try{q=b.next(),d=1<arguments.length?a.call(c,d,q,g,b):q,g++}catch(h){if(isStopIteration(h)){if(1<arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value");}throw h;}try{for(;;)q=b.next(),d=a.call(c,d,q,g,b),g++}catch(i){if(isStopIteration(i))return d;
throw i;}};f.prototype.forEach=c.forEach;f.prototype.map=c.map;f.prototype.toArray=c.toArray;f.prototype.toObject=c.toObject;f.prototype.filter=c.filter;f.prototype.all=c.all;f.prototype.any=c.any;f.prototype.min=c.min;f.prototype.max=c.max;f.prototype.sum=c.sum;f.prototype.average=c.average;f.prototype.flatten=c.flatten;f.prototype.every=function(a){var b=f(this),d=!0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;b.mapIterator.apply(b,arguments).forEach(function(a){if(!a)throw d=
!1,StopIteration;});return d};f.prototype.some=function(a){var b=f(this),d=!1;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;b.mapIterator.apply(b,arguments).forEach(function(a){if(a)throw d=!0,StopIteration;});return d};f.prototype.concat=function(){return f.concat(Array.prototype.concat.apply(this,arguments))};f.prototype.dropWhile=function(a,b){var d=f(this),c=!1,g;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;d.forEach(function(f,
h){if(!a.call(b,f,h,d))throw c=!0,g=f,StopIteration;});return c?d.constructor([g]).concat(d):d.constructor([])};f.prototype.takeWhile=function(a,b){var d=f(this);if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return d.mapIterator(function(c,g){if(!a.call(b,c,g,d))throw StopIteration;return c})};f.prototype.filterIterator=function(a,b){var d=f(this),c=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new d.constructor(function(){for(var g;;)if(g=
d.next(),a.call(b,g,c++,d))return g})};f.prototype.zip=function(){return f.transpose(Array.prototype.concat.apply(this,arguments))};f.prototype.enumerate=function(a){return f.count(a).zip(this)};f.iterate=function(a){var b;b=0;return new f(function(){if("object"===typeof a)for(;!(b in a);){if(b>=a.length)throw StopIteration;b+=1}else if(b>=a.length)throw StopIteration;var d=a[b];b+=1;return d})};f.cycle=function(a,b){2>arguments.length&&(b=Infinity);var d=function(){throw StopIteration;};return new f(function(){var c;
try{return d()}catch(g){if(isStopIteration(g)){if(0>=b)throw g;b--;c=f.iterate(a);d=c.next.bind(c);return d()}throw g;}})};f.concat=function(a){var a=f(a),b=function(){throw StopIteration;};return new f(function(){var d;try{return b()}catch(c){if(isStopIteration(c))return d=f(a.next()),b=d.next.bind(d),b();throw c;}})};f.transpose=function(a){a=f(a).map(f);return 1>a.length?new f([]):new f(function(){var b,d=a.map(function(a){try{return a.next()}catch(d){if(isStopIteration(d))b=!0;else throw d;}});
if(b)throw StopIteration;return d})};f.zip=function(){return f.transpose(Array.prototype.slice.call(arguments))};f.chain=function(){return f.concat(Array.prototype.slice.call(arguments))};f.range=function(a,b,d){3>arguments.length&&(d=1);2>arguments.length&&(b=a,a=0);a=a||0;return new f(function(){if(a>=b)throw StopIteration;if(isNaN(a))throw"";var c=a;a+=d;return c})};f.count=function(a,b){return f.range(a,Infinity,b||1)};f.repeat=function(a,b){2>arguments.length&&(b=Infinity);return(new f.range(+b)).mapIterator(function(){return a})};
"undefined"===typeof isStopIteration&&(u.isStopIteration=function(a){return"[object StopIteration]"===Object.prototype.toString.call(a)});if("undefined"===typeof StopIteration){u.StopIteration={};var Xa=Object.prototype.toString;Object.prototype.toString=function(){return this===u.StopIteration||this instanceof u.ReturnValue?"[object StopIteration]":Xa.call(this,arguments)}}"undefined"===typeof ReturnValue&&(u.ReturnValue=function(a){if(!(this instanceof u.ReturnValue))return new u.ReturnValue(a);
this.value=a});V.module$exports&&(V=V.module$exports);var O={};O.module$exports=i;v;i.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.content)};i.prototype.find=function(a,b){for(var b=b||this.contentEquals,d=this.head,c=d.next;c!==d;){if(b(c.value,a))return c;c=c.next}};i.prototype.findLast=function(a,b){for(var b=b||this.contentEquals,d=this.head,c=d.prev;c!==d;){if(b(c.value,a))return c;c=c.prev}};i.prototype.has=function(a,b){return!!this.find(a,b)};
i.prototype.get=function(a,b){var c=this.find(a,b);return c?c.value:this.content()};i.prototype["delete"]=function(a,b){var c=this.findLast(a,b);return c?(this.isObserved&&this.dispatchBeforeContentChange([],[a]),c["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]),!0):!1};i.prototype.clear=function(){this.head.next=this.head.prev=this.head};i.prototype.add=function(a){this.isObserved&&this.dispatchBeforeContentChange([a],[]);this.head.addBefore(new this.Node(a));this.length++;
this.isObserved&&this.dispatchContentChange([a],[]);return!0};i.prototype.push=function(){for(var a=this.head,b=0;b<arguments.length;b++){var c=arguments[b];this.isObserved&&this.dispatchBeforeContentChange([c],[]);var e=new this.Node(c);a.addBefore(e);this.length++;this.isObserved&&this.dispatchContentChange([c],[])}};i.prototype.unshift=function(){for(var a=this.head,b=0;b<arguments.length;b++){var c=arguments[b],e=new this.Node(c);a.addAfter(e);this.length++;this.isObserved&&this.dispatchContentChange([c],
[]);a=e}};i.prototype.pop=function(){var a,b=this.head;b.prev!==b&&(a=b.prev.value,this.isObserved&&this.dispatchBeforeContentChange([],[a]),b.prev["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]));return a};i.prototype.shift=function(){var a,b=this.head;b.prev!==b&&(a=b.next.value,this.isObserved&&this.dispatchBeforeContentChange([],[a]),b.next["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]));return a};i.prototype.scan=function(a,b){var c=
this.head;if("number"===typeof a){var e=a;if(0<=e)for(a=c.next;e&&!(e--,a=a.next,a==c););else for(a=c;0>e&&!(e++,a=a.prev,a==c););return a}return a||b};i.prototype.slice=function(a,b){for(var c=[],e=this.head,a=this.scan(a,e.next),b=this.scan(b,e);a!==b&&a!==e;)c.push(a.value),a=a.next;return c};i.prototype.splice=function(a,b){return this.swap(a,b,Array.prototype.slice.call(arguments,2))};i.prototype.swap=function(a,b,c){var e=[],g=a,a=this.scan(a,this.head);for(void 0===b&&(b=Infinity);b--&&0<=
b&&a!==this.head;)e.push(a.value),a["delete"](),a=a.next,this.length--;if(c){null===g&&a===this.head&&(a=this.head.next);for(b=0;b<c.length;b++)g=new this.Node(c[b]),a.addBefore(g);this.length+=c.length}return e};i.prototype.reverse=function(){var a=this.head;do{var b=a.next;a.next=a.prev;a.prev=b;a=a.next}while(a!==this.head);return this};i.prototype.reduce=function(a,b,c){for(var e=this.head,g=e.next;g!==e;)b=a.call(c,b,g.value,g,this),g=g.next;return b};i.prototype.reduceRight=function(a,b,c){for(var e=
this.head,g=e.prev;g!==e;)b=a.call(c,b,g.value,g,this),g=g.prev;return b};i.prototype.addEach=c.addEach;i.prototype.forEach=c.forEach;i.prototype.map=c.map;i.prototype.toArray=c.toArray;i.prototype.toObject=c.toObject;i.prototype.filter=c.filter;i.prototype.every=c.every;i.prototype.some=c.some;i.prototype.all=c.all;i.prototype.any=c.any;i.prototype.min=c.min;i.prototype.max=c.max;i.prototype.sum=c.sum;i.prototype.average=c.average;i.prototype.concat=c.concat;i.prototype.flatten=c.flatten;i.prototype.zip=
c.zip;i.prototype.equals=c.equals;i.prototype.compare=c.compare;i.prototype.sorted=c.sorted;i.prototype.reversed=c.reversed;i.prototype.clone=c.clone;i.prototype.getContentChangeDescriptor=H;i.prototype.addContentChangeListener=I;i.prototype.removeContentChangeListener=J;i.prototype.dispatchContentChange=K;i.prototype.addBeforeContentChangeListener=L;i.prototype.removeBeforeContentChangeListener=M;i.prototype.dispatchBeforeContentChange=N;i.prototype.equals=function(a,b){b=b||this.contentEquals||
Object.equals;return this===a?!0:this.length===a.length&&this.zip(a).every(function(a){return b(a[0],a[1])})};i.prototype.one=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value};i.prototype.only=function(){if(this.head===this.head.next)throw Error("Can't get only value in empty list");if(this.head.prev!==this.head.next)throw Error("Can't get only value in list with multiple values");return this.head.next.value};i.prototype.iterate=
function(){return new ya(this.head)};ya.prototype.next=function(){if(this.at===this.head)throw StopIteration;var a=this.at.value;this.at=this.at.next;return a};i.prototype.Node=ia;ia.prototype["delete"]=function(){this.prev.next=this.next;this.next.prev=this.prev};ia.prototype.addBefore=function(a){var b=this.prev;this.prev=a;a.prev=b;b.next=a;a.next=this};ia.prototype.addAfter=function(a){var b=this.next;this.next=a;a.next=b;b.prev=a;a.prev=this};O.module$exports&&(O=O.module$exports);var P={};v;
var Ya=U,Za=O,$a=R,ab=V;P.module$exports=k;k.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};k.prototype.Buckets=Ya;k.prototype.Bucket=Za;k.prototype.has=function(a){var b=this.contentHash(a);return this.buckets.get(b).has(a)};k.prototype.get=function(a){var b=this.contentHash(a),c=this.buckets;return c.has(b)?c.get(b).get(a):this.content(a)};k.prototype["delete"]=function(a){var b=this.contentHash(a),c=this.buckets;if(c.has(b)){var e=
c.get(b);if(e["delete"](a)){this.isObserved&&this.dispatchBeforeContentChange([],[a]);this.length--;if(0===e.length)c["delete"](b);this.isObserved&&this.dispatchContentChange([],[a]);return!0}}return!1};k.prototype.clear=function(){this.buckets.clear();this.length=0};k.prototype.add=function(a){var b=this.contentHash(a),c=this.buckets;c.has(b)||c.set(b,new this.Bucket(null,this.contentEquals));return!c.get(b).has(a)?(this.isObserved&&this.dispatchBeforeContentChange([a],[]),c.get(b).add(a),this.length++,
this.isObserved&&this.dispatchContentChange([a],[]),!0):!1};k.prototype.reduce=function(a,b,c){return this.buckets.reduce(function(b,g){return g.reduce(a,b,c)},b)};k.prototype.addEach=c.addEach;k.prototype.forEach=c.forEach;k.prototype.map=c.map;k.prototype.toArray=c.toArray;k.prototype.filter=c.filter;k.prototype.every=c.every;k.prototype.some=c.some;k.prototype.all=c.all;k.prototype.any=c.any;k.prototype.min=c.min;k.prototype.max=c.max;k.prototype.sum=c.sum;k.prototype.average=c.average;k.prototype.concat=
c.concat;k.prototype.flatten=c.flatten;k.prototype.zip=c.zip;k.prototype.sorted=c.sorted;k.prototype.clone=c.clone;k.prototype.getContentChangeDescriptor=H;k.prototype.addContentChangeListener=I;k.prototype.removeContentChangeListener=J;k.prototype.dispatchContentChange=K;k.prototype.addBeforeContentChangeListener=L;k.prototype.removeBeforeContentChangeListener=M;k.prototype.dispatchBeforeContentChange=N;k.prototype.equals=function(a){var b=this;return Object(a)===a&&"function"===typeof a.reduce&&
"number"===typeof a.length&&this.length===a.length&&a.reduce(function(a,c){return a&&b.has(c)},!0)};k.prototype.iterate=function(){var a=this.buckets,b=a.keys();return ab.concat(b.map(function(b){return a.get(b).iterate()}))};k.prototype.log=function(a,b,c,e){a=a||$a.unicodeSharp;b=b||this.logNode;c||(c=console.log,e=console);var c=c.bind(e),g=this.buckets,f=g.keys();f.forEach(function(h,i){var j,k;0===i?(j=a.branchDown,k=a.strafe):i===f.length-1?(j=a.fromAbove,k=" "):(j=a.fromBoth,k=a.strafe);var l=
g.get(h);c.call(e,j+a.through+a.branchDown+" "+h);l.forEach(function(g,f){var h;h=f===l.head.prev?a.fromAbove:a.fromBoth;b(g,function(b){c.call(e,k+" "+h+a.through+a.through+" "+b)},function(a){c.call(e,k+"     "+a)})})})};k.prototype.logNode=function(a,b,c){a=a.value;Object(a)===a?b.call(c,JSON.stringify(a)):b.call(c,a)};P.module$exports&&(P=P.module$exports);var ca={};v;var Ka=P,y=D;ca.module$exports=n;n.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,
this.content)};n.prototype.addEach=y.addEach;n.prototype.has=y.has;n.prototype.get=y.get;n.prototype.set=y.set;n.prototype["delete"]=y["delete"];n.prototype.clear=y.clear;n.prototype.reduce=y.reduce;n.prototype.keys=y.keys;n.prototype.values=y.values;n.prototype.items=y.items;n.prototype.Item=y.Item;n.prototype.forEach=c.forEach;n.prototype.map=c.map;n.prototype.toArray=c.toArray;n.prototype.toObject=c.toObject;n.prototype.filter=c.filter;n.prototype.every=c.every;n.prototype.some=c.some;n.prototype.all=
c.all;n.prototype.any=c.any;n.prototype.min=c.min;n.prototype.max=c.max;n.prototype.sum=c.sum;n.prototype.average=c.average;n.prototype.concat=c.concat;n.prototype.flatten=c.flatten;n.prototype.sorted=c.sorted;n.prototype.zip=c.zip;n.prototype.clone=c.clone;n.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};n.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};ca.module$exports&&(ca=ca.module$exports);var Q={};v;var La=O,Ma=P;Q.module$exports=
l;l.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};l.prototype.has=function(a){a=new this.contentList.Node(a);return this.contentSet.has(a)};l.prototype.get=function(a){var b=new this.contentList.Node(a);return(b=this.contentSet.get(b))?b.value:this.content(a)};l.prototype.add=function(a){var b=new this.contentList.Node(a);return!this.contentSet.has(b)?(this.contentList.add(a),b=this.contentList.head.prev,this.contentSet.add(b),
this.length++,!0):!1};l.prototype["delete"]=function(a){a=new this.contentList.Node(a);return this.contentSet.has(a)?(a=this.contentSet.get(a),this.contentSet["delete"](a),a["delete"](),this.length--,!0):!1};l.prototype.clear=function(){this.contentSet.clear();this.contentList.clear();this.length=0};l.prototype.reduce=function(){var a=this.contentList;return a.reduce.apply(a,arguments)};l.prototype.reduceRight=function(){var a=this.contentList;return a.reduceRight.apply(a,arguments)};l.prototype.addEach=
c.addEach;l.prototype.forEach=c.forEach;l.prototype.map=c.map;l.prototype.toArray=c.toArray;l.prototype.filter=c.filter;l.prototype.every=c.every;l.prototype.some=c.some;l.prototype.all=c.all;l.prototype.any=c.any;l.prototype.min=c.min;l.prototype.max=c.max;l.prototype.sum=c.sum;l.prototype.average=c.average;l.prototype.concat=c.concat;l.prototype.flatten=c.flatten;l.prototype.zip=c.zip;l.prototype.sorted=c.sorted;l.prototype.clone=c.clone;l.prototype.makeObservable=function(){var a=this;this.contentSet.addBeforeContentChangeListener(function(){a.dispatchBeforeContentChange.apply(a,
arguments)});this.contentSet.addContentChangeListener(function(){a.dispatchContentChange.apply(a,arguments)});this.isObservable=!0};l.prototype.getContentChangeDescriptor=H;l.prototype.addContentChangeListener=I;l.prototype.removeContentChangeListener=J;l.prototype.dispatchContentChange=K;l.prototype.addBeforeContentChangeListener=L;l.prototype.removeBeforeContentChangeListener=M;l.prototype.dispatchBeforeContentChange=N;l.prototype.equals=function(a){return this.contentSet.equals(a)};l.prototype.iterate=
function(){return this.contentList.iterate()};l.prototype.log=function(){var a=this.contentSet;return a.log.apply(a,arguments)};Q.module$exports&&(Q=Q.module$exports);var W={};v;var Na=Q;W.module$exports=m;m.prototype.constructClone=function(a){return new this.constructor(a,this.maxLength,this.contentEquals,this.contentHash,this.content)};m.prototype.has=function(a){return this.contentSet.has(a)};m.prototype.get=function(a){a=this.contentSet.get(a);void 0!==a?(this.contentSet["delete"](a),this.contentSet.add(a)):
a=this.content();return a};m.prototype.add=function(a){this.contentSet.has(a)&&(this.contentSet["delete"](a),this.length--);this.contentSet.add(a);this.length++;return this.contentSet.length>this.maxLength?(this.contentSet["delete"](this.contentSet.contentList.head.next.value),this.length--,!1):!0};m.prototype["delete"]=function(a){return this.contentSet["delete"](a)?(this.length--,!0):!1};m.prototype.clear=function(){this.contentSet.clear();this.length=0};m.prototype.reduce=function(){var a=this.contentSet;
return a.reduce.apply(a,arguments)};m.prototype.reduceRight=function(){var a=this.contentSet;return a.reduceRight.apply(a,arguments)};m.prototype.addEach=c.addEach;m.prototype.forEach=c.forEach;m.prototype.map=c.map;m.prototype.toArray=c.toArray;m.prototype.filter=c.filter;m.prototype.every=c.every;m.prototype.some=c.some;m.prototype.all=c.all;m.prototype.any=c.any;m.prototype.min=c.min;m.prototype.max=c.max;m.prototype.sum=c.sum;m.prototype.average=c.average;m.prototype.concat=c.concat;m.prototype.flatten=
c.flatten;m.prototype.zip=c.zip;m.prototype.sorted=c.sorted;m.prototype.clone=c.clone;m.prototype.makeObservable=function(){var a=this;this.contentSet.addBeforeContentChangeListener(function(){a.dispatchBeforeContentChange.apply(a,arguments)});this.contentSet.addContentChangeListener(function(){a.dispatchContentChange.apply(a,arguments)});this.isObservable=!0};m.prototype.getContentChangeDescriptor=H;m.prototype.addContentChangeListener=I;m.prototype.removeContentChangeListener=J;m.prototype.dispatchContentChange=
K;m.prototype.addBeforeContentChangeListener=L;m.prototype.removeBeforeContentChangeListener=M;m.prototype.dispatchBeforeContentChange=N;m.prototype.equals=function(a){return this.contentSet.equals(a)};m.prototype.iterate=function(){return this.contentSet.iterate()};W.module$exports&&(W=W.module$exports);var da={};v;var Oa=W,z=D;da.module$exports=o;o.prototype.constructClone=function(a){return new this.constructor(a,this.maxLength,this.contentEquals,this.contentHash,this.content)};o.prototype.addEach=
z.addEach;o.prototype.has=z.has;o.prototype.get=z.get;o.prototype.set=z.set;o.prototype["delete"]=z["delete"];o.prototype.clear=z.clear;o.prototype.reduce=z.reduce;o.prototype.keys=z.keys;o.prototype.values=z.values;o.prototype.items=z.items;o.prototype.Item=z.Item;o.prototype.forEach=c.forEach;o.prototype.map=c.map;o.prototype.toArray=c.toArray;o.prototype.toObject=c.toObject;o.prototype.filter=c.filter;o.prototype.every=c.every;o.prototype.some=c.some;o.prototype.all=c.all;o.prototype.any=c.any;
o.prototype.min=c.min;o.prototype.max=c.max;o.prototype.sum=c.sum;o.prototype.average=c.average;o.prototype.concat=c.concat;o.prototype.flatten=c.flatten;o.prototype.sorted=c.sorted;o.prototype.zip=c.zip;o.prototype.clone=c.clone;o.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};o.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};da.module$exports&&(da=da.module$exports);var X={};v;var Pa=Q,A=D;X.module$exports=p;p.prototype.constructClone=
function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};p.prototype.addEach=A.addEach;p.prototype.has=A.has;p.prototype.get=A.get;p.prototype.set=A.set;p.prototype["delete"]=A["delete"];p.prototype.clear=A.clear;p.prototype.reduce=A.reduce;p.prototype.keys=A.keys;p.prototype.values=A.values;p.prototype.items=A.items;p.prototype.Item=A.Item;p.prototype.forEach=c.forEach;p.prototype.map=c.map;p.prototype.toArray=c.toArray;p.prototype.toObject=c.toObject;p.prototype.filter=
c.filter;p.prototype.every=c.every;p.prototype.some=c.some;p.prototype.all=c.all;p.prototype.any=c.any;p.prototype.min=c.min;p.prototype.max=c.max;p.prototype.sum=c.sum;p.prototype.average=c.average;p.prototype.concat=c.concat;p.prototype.flatten=c.flatten;p.prototype.sorted=c.sorted;p.prototype.zip=c.zip;p.prototype.clone=c.clone;p.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};p.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};
X.module$exports&&(X=X.module$exports);var ea={},na=X;ea.module$exports=E;E.prototype=Object.create(na.prototype);E.prototype.constructClone=function(a){return new this.constructor(a,this.bucket,this.contentEquals,this.contentHash)};E.prototype.set=function(a,b){var c=this.get(a);c.swap(0,c.length,b)};E.prototype.bucket=function(){return[]};ea.module$exports&&(ea=ea.module$exports);var Y={};Y.module$exports=j;T;v;j.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,
this.contentCompare,this.content)};j.prototype.has=function(a){var b=ja(this.array,a,this.contentCompare);return 0<=b&&this.contentEquals(this.array[b],a)};j.prototype.get=function(a){var b=oa(this.array,a,this.contentCompare,this.contentEquals);return-1!==b?this.array[b]:this.content(a)};j.prototype.add=function(a){var b;b=this.array;var c=this.contentCompare,e=ja(b,a,c);if(0>e)b=-e-1;else{for(var g=b.length-1;e<g&&0===c(a,b[e+1]);)e++;b=e}this.isObserved&&this.dispatchBeforeContentChange([a],[],
b);this.array.splice(b,0,a);this.length++;this.isObserved&&this.dispatchContentChange([a],[],b);return!0};j.prototype["delete"]=function(a){var b=oa(this.array,a,this.contentCompare,this.contentEquals);return-1!==b?(this.isObserved&&this.dispatchBeforeContentChange([],[a],b),this.array.splice(b,1),this.length--,this.isObserved&&this.dispatchContentChange([],[a],b),!0):!1};j.prototype.indexOf=function(a){return oa(this.array,a,this.contentCompare,this.contentEquals)};j.prototype.lastIndexOf=function(a){var b=
this.array,c=this.contentCompare,e=this.contentEquals,c=ja(b,a,c);if(0>c)a=-1;else{for(;c<b.length-1&&e(a,b[c+1]);)c++;a=e(a,b[c])?c:-1}return a};j.prototype.push=function(){this.addEach(arguments)};j.prototype.unshift=function(){this.addEach(arguments)};j.prototype.pop=function(){return this.array.pop()};j.prototype.shift=function(){return this.array.shift()};j.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)};j.prototype.splice=function(a,b){return this.swap(a,b,Array.prototype.slice.call(arguments,
2))};j.prototype.swap=function(a,b,c){if(void 0===a&&void 0===b)return[];a=a||0;0>a&&(a+=this.length);void 0===b&&(b=Infinity);var e=this.slice(a,a+b);this.isObserved&&this.dispatchBeforeContentChange(c,e,a);this.array.splice(a,b);this.addEach(c);this.isObserved&&this.dispatchContentChange(c,e,a);return e};j.prototype.reduce=function(){return this.array.reduce.apply(this.array,arguments)};j.prototype.reduceRight=function(){return this.array.reduce.apply(this.array,arguments)};j.prototype.addEach=
c.addEach;j.prototype.forEach=c.forEach;j.prototype.map=c.map;j.prototype.toArray=c.toArray;j.prototype.filter=c.filter;j.prototype.every=c.every;j.prototype.some=c.some;j.prototype.all=c.all;j.prototype.any=c.any;j.prototype.sum=c.sum;j.prototype.average=c.average;j.prototype.concat=c.concat;j.prototype.flatten=c.flatten;j.prototype.zip=c.flatten;j.prototype.sorted=c.sorted;j.prototype.clone=c.clone;j.prototype.getContentChangeDescriptor=H;j.prototype.addContentChangeListener=I;j.prototype.removeContentChangeListener=
J;j.prototype.dispatchContentChange=K;j.prototype.addBeforeContentChangeListener=L;j.prototype.removeBeforeContentChangeListener=M;j.prototype.dispatchBeforeContentChange=N;j.prototype.min=function(){if(this.length)return this.array[0]};j.prototype.max=function(){if(this.length)return this.array[this.length-1]};j.prototype.one=function(){return this.array.one()};j.prototype.only=function(){return this.array.only()};j.prototype.clear=function(){var a;this.isObserved&&(a=this.array.slice(),this.dispatchBeforeContentChange([],
a,0));this.length=0;this.array.clear();this.isObserved&&this.dispatchContentChange([],a,0)};j.prototype.iterate=function(a,b){return new this.Iterator(this.array,a,b)};j.prototype.Iterator=Array.prototype.Iterator;Y.module$exports&&(Y=Y.module$exports);var Z={};Z.module$exports=aa;var pa=Y;aa.prototype=Object.create(pa.prototype);aa.prototype.add=function(a){if(this.has(a))return!1;pa.prototype.add.call(this,a);return!0};Z.module$exports&&(Z=Z.module$exports);var fa={};v;var Qa=Z,B=D;fa.module$exports=
t;t.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};t.prototype.addEach=B.addEach;t.prototype.has=B.has;t.prototype.get=B.get;t.prototype.set=B.set;t.prototype["delete"]=B["delete"];t.prototype.clear=B.clear;t.prototype.reduce=B.reduce;t.prototype.keys=B.keys;t.prototype.values=B.values;t.prototype.items=B.items;t.prototype.Item=B.Item;t.prototype.forEach=c.forEach;t.prototype.map=c.map;t.prototype.toArray=c.toArray;t.prototype.toObject=
c.toObject;t.prototype.filter=c.filter;t.prototype.every=c.every;t.prototype.some=c.some;t.prototype.all=c.all;t.prototype.any=c.any;t.prototype.min=c.min;t.prototype.max=c.max;t.prototype.sum=c.sum;t.prototype.average=c.average;t.prototype.flatten=c.flatten;t.prototype.zip=c.zip;t.prototype.clone=c.clone;fa.module$exports&&(fa=fa.module$exports);var $={};$.module$exports=h;v;var Da=R;h.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};
h.prototype.has=function(a){return this.root?(this.splay(a),this.contentEquals(a,this.root.value)):!1};h.prototype.get=function(a){return this.root&&(this.splay(a),this.contentEquals(a,this.root.value))?this.root.value:this.content(a)};h.prototype.add=function(a){var b=new this.Node(a);if(this.root){if(this.splay(a),!this.contentEquals(a,this.root.value))return this.isObserved&&this.dispatchBeforeContentChange([a],[],this.root.index),0>this.contentCompare(a,this.root.value)?(b.right=this.root,b.left=
this.root.left,this.root.left=null):(b.left=this.root,b.right=this.root.right,this.root.right=null),this.root.touch(),b.touch(),this.root=b,this.length++,this.isObserved&&this.dispatchContentChange([a],[],this.root.index),!0}else return this.isObserved&&this.dispatchBeforeContentChange([a],[],0),this.root=b,this.length++,this.isObserved&&this.dispatchContentChange([a],[],0),!0;return!1};h.prototype["delete"]=function(a){if(this.root&&(this.splay(a),this.contentEquals(a,this.root.value))){var b=this.root.index;
this.isObserved&&this.dispatchBeforeContentChange([],[a],b);if(this.root.left){var c=this.root.right;this.root=this.root.left;this.splay(a);this.root.right=c}else this.root=this.root.right;this.length--;this.root&&this.root.touch();this.isObserved&&this.dispatchContentChange([],[a],b);return!0}return!1};h.prototype.indexOf=function(a){return this.root&&(this.splay(a),this.contentEquals(a,this.root.value))?this.root.index:-1};h.prototype.find=function(a){if(this.root&&(this.splay(a),this.contentEquals(a,
this.root.value)))return this.root};h.prototype.findGreatest=function(a){if(this.root){for(a=a||this.root;a.right;)a=a.right;return a}};h.prototype.findLeast=function(a){if(this.root){for(a=a||this.root;a.left;)a=a.left;return a}};h.prototype.findGreatestLessThanOrEqual=function(a){if(this.root)return this.splay(a),this.root};h.prototype.findGreatestLessThan=function(a){if(this.root)return this.splay(a),this.root.getPrevious()};h.prototype.findLeastGreaterThanOrEqual=function(a){if(this.root)return this.splay(a),
0===this.contentCompare(a,this.root.value)?this.root:this.root.getNext()};h.prototype.findLeastGreaterThan=function(a){if(this.root)return this.splay(a),this.contentCompare(a,this.root.value),this.root.getNext()};h.prototype.pop=function(){if(this.root){var a=this.findGreatest();this["delete"](a.value);return a.value}};h.prototype.shift=function(){if(this.root){var a=this.findLeast();this["delete"](a.value);return a.value}};h.prototype.push=function(){this.addEach(arguments)};h.prototype.unshift=
function(){this.addEach(arguments)};h.prototype.slice=function(a,b){a=a||0;b=b||this.length;0>a&&(a+=this.length);0>b&&(b+=this.length);var c=[];if(this.root)for(this.splayIndex(a);this.root.index<b;){c.push(this.root.value);if(!this.root.right)break;this.splay(this.root.getNext().value)}return c};h.prototype.splice=function(a,b){return this.swap(a,b,Array.prototype.slice.call(arguments,2))};h.prototype.swap=function(a,b,c){if(void 0===a&&void 0===b)return[];a=a||0;0>a&&(a+=this.length);void 0===
b&&(b=Infinity);var e=[];if(this.root){this.splayIndex(a);for(a=0;a<b;a++){e.push(this.root.value);var g=this.root.getNext();this["delete"](this.root.value);if(!g)break;this.splay(g.value)}}this.addEach(c);return e};h.prototype.splay=function(a){var b,c,e,g,f,h;if(this.root){b=c=e=new this.Node;h=new this.Node;for(f=this.root;;)if(g=this.contentCompare(a,f.value),0>g)if(f.left){if(0>this.contentCompare(a,f.left.value)&&(g=f.left,f.left=g.right,f.touch(),g.right=f,g.touch(),f=g,!f.left))break;g=new x;
g.right=f;g.left=h.left;h.left=g;e.left=f;e.touch();e=f;f=f.left}else break;else if(0<g)if(f.right){if(0<this.contentCompare(a,f.right.value)&&(g=f.right,f.right=g.left,f.touch(),g.left=f,g.touch(),f=g,!f.right))break;g=new x;g.left=f;g.right=h.right;h.right=g;c.right=f;c.touch();c=f;f=f.right}else break;else break;c.right=f.left;c.touch();e.left=f.right;e.touch();f.left=b.right;for(f.right=b.left;h.left;)h.left.right.touch(),h.left=h.left.left;for(;h.right;)h.right.left.touch(),h.right=h.right.right;
f.touch();this.root=f}};h.prototype.splayIndex=function(a){if(this.root){for(var b=this.root,c=this.root.index;c!==a;)if(c>a&&b.left)b=b.left,c-=1+(b.right?b.right.length:0);else if(c<a&&b.right)b=b.right,c+=1+(b.left?b.left.length:0);else break;this.splay(b.value);return this.root.index===a}return!1};h.prototype.reduce=function(a,b,c){this.root&&(b=this.root.reduce(a,b,c,this));return b};h.prototype.reduceRight=function(a,b,c){this.root&&(b=this.root.reduceRight(a,b,c,this));return b};h.prototype.addEach=
c.addEach;h.prototype.forEach=c.forEach;h.prototype.map=c.map;h.prototype.toArray=c.toArray;h.prototype.filter=c.filter;h.prototype.every=c.every;h.prototype.some=c.some;h.prototype.all=c.all;h.prototype.any=c.any;h.prototype.sum=c.sum;h.prototype.average=c.average;h.prototype.concat=c.concat;h.prototype.flatten=c.flatten;h.prototype.zip=c.flatten;h.prototype.sorted=c.sorted;h.prototype.clone=c.clone;h.prototype.getContentChangeDescriptor=H;h.prototype.addContentChangeListener=I;h.prototype.removeContentChangeListener=
J;h.prototype.dispatchContentChange=K;h.prototype.addBeforeContentChangeListener=L;h.prototype.removeBeforeContentChangeListener=M;h.prototype.dispatchBeforeContentChange=N;h.prototype.min=function(a){if(a=this.findLeast(a))return a.value};h.prototype.max=function(a){if(a=this.findGreatest(a))return a.value};h.prototype.one=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value};h.prototype.only=function(){if(!this.root)throw Error("Can't get only value in empty set");
if(this.root.left||this.root.right)throw Error("Can't get only value in set with multiple values");return this.root.value};h.prototype.clear=function(){var a;this.isObserved&&(a=this.toArray(),this.dispatchBeforeContentChange([],a,0));this.root=null;this.length=0;this.isObserved&&this.dispatchContentChange([],a,0)};h.prototype.iterate=function(a,b){return new this.Iterator(this,a,b)};h.prototype.Iterator=za;h.prototype.summary=function(){return this.root?this.root.summary():"()"};h.prototype.log=
function(a,b,c,e){a=a||Da.unicodeRound;b=b||this.logNode;c||(c=console.log,e=console);c=c.bind(e);this.root&&this.root.log(a,b,c,c)};h.prototype.logNode=function(a,b){b(" "+a.value)};h.logCharsets=Da;h.prototype.Node=x;x.prototype.reduce=function(a,b,c,e,f){f=f||0;this.left&&(b=this.left.reduce(a,b,c,e,f+1));b=a.call(c,b,this.value,this,e,f);this.right&&(b=this.right.reduce(a,b,c,e,f+1));return b};x.prototype.reduceRight=function(a,b,c,e,f){f=f||0;this.right&&(b=this.right.reduce(a,b,c,e,f+1));b=
a.call(c,b,this.value,this,e,f);this.left&&(b=this.left.reduce(a,b,c,e,f+1));return b};x.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0);this.index=this.left?this.left.length:0};x.prototype.checkIntegrity=function(){var a;a=1+(this.left?this.left.checkIntegrity():0);a+=this.right?this.right.checkIntegrity():0;if(this.length!==a)throw Error("Integrity check failed: "+this.summary());return a};x.prototype.getNext=function(){var a=this;if(a.right){for(a=
a.right;a.left;)a=a.left;return a}};x.prototype.getPrevious=function(){var a=this;if(a.left){for(a=a.left;a.right;)a=a.right;return a}};x.prototype.summary=function(){var a=this.value||"-",a=a+(" <"+this.length);return!this.left&&!this.right?"("+a+")":"("+a+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")"};x.prototype.log=function(a,b,c,e){var f=this,h;h=this.left&&this.right?a.intersection:this.left?a.branchUp:this.right?a.branchDown:a.through;var i;this.left&&
this.left.log(a,b,function(b){i?e(a.strafe+" "+b):(i=!0,e(a.fromBelow+a.through+b))},function(a){e("  "+a)});var j;b(this,function(b){j?c((f.right?a.strafe:" ")+b):(j=!0,c(h+b))},function(b){e((f.left?a.strafe:" ")+b)});var k;this.right&&this.right.log(a,b,function(b){k?c("  "+b):(k=!0,c(a.fromAbove+a.through+b))},function(b){c(a.strafe+" "+b)})};za.prototype.next=function(){var a;a=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast();if(!a)throw StopIteration;if(void 0!==
this.end&&0<=this.set.contentCompare(a.value,this.end))throw StopIteration;this.prev=a;return a.value};$.module$exports&&($=$.module$exports);var ga={};v;var Ra=$,C=D;ga.module$exports=r;r.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};r.prototype.addEach=C.addEach;r.prototype.has=C.has;r.prototype.get=C.get;r.prototype.set=C.set;r.prototype["delete"]=C["delete"];r.prototype.clear=C.clear;r.prototype.reduce=C.reduce;r.prototype.keys=
C.keys;r.prototype.values=C.values;r.prototype.items=C.items;r.prototype.Item=C.Item;r.prototype.forEach=c.forEach;r.prototype.map=c.map;r.prototype.toArray=c.toArray;r.prototype.toObject=c.toObject;r.prototype.filter=c.filter;r.prototype.every=c.every;r.prototype.some=c.some;r.prototype.all=c.all;r.prototype.any=c.any;r.prototype.min=c.min;r.prototype.max=c.max;r.prototype.sum=c.sum;r.prototype.average=c.average;r.prototype.flatten=c.flatten;r.prototype.zip=c.zip;r.prototype.clone=c.clone;r.prototype.log=
function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};r.prototype.report=function(a,b,c,e){e=e||this.stringify;this.contentSet.report(a,b,c,e)};r.prototype.stringify=function(a,b,c,e){a.call(b,e+" "+c.value.key+": "+c.value.value)};ga.module$exports&&(ga=ga.module$exports);Ca;T;u.List=O;u.Set=Q;u.Map=X;u.MultiMap=ea;u.WeakMap=F;u.SortedSet=$;u.SortedMap=ga;u.LruSet=W;u.LruMap=da;u.SortedArray=Y;u.SortedArraySet=Z;u.SortedArrayMap=fa;u.FastSet=P;u.FastMap=ca;u.Dict=U;u.Iterator=V})(this);
