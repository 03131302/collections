(function(l){function qa(a,b){return b}function ra(a){return a}function sa(a,b){return[b,a]}function Y(){}function ta(a,b){return a+b}function ua(a,b){b.forEach(va,a);return a}function va(a){this.push(a)}function ka(a){return a}function ba(a,b,c){this.array=a;this.start=null==b?0:b;this.end=c}function s(a,b){if(!(this instanceof s))return new s(a,b);this.content=b||Function.noop;this.store={};this.length=0;this.addEach(a)}function h(a){if(!(this instanceof h))return new h(a);if(Array.isArray(a)||
"string"===typeof a)return h.iterate(a);a=Object(a);if(a instanceof h)return a;if(a.next)this.next=function(){return a.next()};else if(a.iterate){var b=a.iterate();this.next=function(){return b.next()}}else if("[object Function]"===Object.prototype.toString.call(a))this.next=a;else throw new TypeError("Cannot iterate");}function j(a,b,c){if(!(this instanceof j))return new j(a,b,c);var d=this.head=new this.Node;d.next=d;d.prev=d;this.contentEquals=b||Object.equals;this.content=c||Function.noop;this.length=
0;this.addEach(a)}function la(a){this.head=a;this.at=a.next}function Z(a){this.value=a;this.next=this.prev=null}function o(a,b,c,d){if(!(this instanceof o))return new o(a,b,c);b=b||Object.equals;c=c||Object.hash;d=d||Function.noop;this.contentEquals=b;this.contentHash=c;this.content=d;this.buckets=new this.Buckets(null,this.Bucket);this.length=0;this.addEach(a)}function C(a,b,c,d){if(!(this instanceof C))return new C(a,b,c);b=b||Object.equals;c=c||Object.hash;d=d||Function.noop;this.contentEquals=
b;this.contentHash=c;this.content=d;this.contentSet=new wa(void 0,function(a,c){return b(a.key,c.key)},function(a){return c(a.key)});this.length=0;this.addEach(a)}function p(a,b,c,d){if(!(this instanceof p))return new p(a,b,c);b=b||Object.equals;c=c||Object.hash;d=d||Function.noop;this.contentEquals=b;this.contentHash=c;this.contentList=new xa(void 0,b);this.content=d;this.contentSet=new ya(void 0,function(a,c){return b(a.value,c.value)},function(a){return c(a.value)});this.length=0;this.addEach(a)}
function q(a,b,c,d,e){if(!(this instanceof q))return new q(a,b,c,d);b=b||Infinity;c=c||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentSet=new za(void 0,c,d);this.contentEquals=c;this.contentHash=d;this.content=e;this.maxLength=b;this.length=0;this.addEach(a)}function D(a,b,c,d,e){if(!(this instanceof D))return new D(a,b,c,d);c=c||Object.equals;d=d||Object.hash;e=e||Function.noop;this.contentEquals=c;this.contentHash=d;this.content=e;this.contentSet=new Aa(void 0,b,function(a,b){return c(a.key,
b.key)},function(a){return d(a.key)});this.length=0;this.addEach(a)}function E(a,b,c,d){if(!(this instanceof E))return new E(a,b,c);b=b||Object.equals;c=c||Object.hash;d=d||Function.noop;this.contentEquals=b;this.contentHash=c;this.content=d;this.contentSet=new Ba(void 0,function(a,c){return b(a.key,c.key)},function(a){return c(a.key)});this.length=0;this.addEach(a)}function A(a,b,c,d){if(!(this instanceof A))return new A(a,b,c,d);this.bucket=b||this.bucket;ca.call(this,a,c,d,function(a){var b=this.bucket();
ca.prototype.set.call(this,a,b);return b})}function k(a,b,c,d){if(!(this instanceof k))return new k(a,b,c,d);Array.isArray(a)?(this.array=a,a=a.splice(0,a.length)):this.array=[];this.contentEquals=b||Object.equals;this.contentCompare=c||Object.compare;this.content=d||Function.noop;this.length=0;this.addEach(a)}function $(a,b,c){for(var d=0,e=a.length-1;d<=e;){var g=d+e>>1,r=c(b,a[g]);if(0<r)d=g+1;else if(0>r)e=g-1;else return g}return-(d+1)}function da(a,b,c,d){c=$(a,b,c);if(0>c)return-1;for(;0<c&&
d(b,a[c-1]);)c--;return d(b,a[c])?c:-1}function y(a,b,c,d){if(!(this instanceof y))return new y(a,b,c,d);ea.call(this,a,b,c,d)}function N(a,b,c,d){if(!(this instanceof N))return new N(a,b,c,d);b=b||Object.equals;c=c||Object.compare;d=d||Function.noop;this.contentEquals=b;this.contentCompare=c;this.content=d;this.contentSet=new Ca(null,function(a,c){return b(a.key,c.key)},function(a,b){return c(a.key,b.key)});this.length=0;this.addEach(a)}function i(a,b,c,d){if(!(this instanceof i))return new i(a,
b,c,d);this.contentEquals=b||Object.equals;this.contentCompare=c||Object.compare;this.content=d||Function.noop;this.root=null;this.length=0;this.addEach(a)}function v(a){this.value=a;this.right=this.left=null;this.length=1}function ma(a,b,c){this.set=a;this.prev=null;this.end=c;if(b&&(a=this.set.findLeastGreaterThanOrEqual(b)))this.set.splay(a.value),this.prev=a.getPrevious()}function B(a,b,c,d){if(!(this instanceof B))return new B(a,b,c,d);b=b||Object.equals;c=c||Object.compare;d=d||Function.noop;
this.contentEquals=b;this.contentCompare=c;this.content=d;this.contentSet=new Da(null,function(a,c){return b(a.key,c.key)},function(a,b){return c(a.key,b.key)});this.length=0;this.addEach(a)}var z={},n=z.module$exports={};n.addEach=function(a){a&&Object(a)===a&&("function"===typeof a.forEach?"function"===typeof a.keys?a.forEach(function(a,c){this.set(c,a)},this):a.forEach(function(a){this.set(a[0],a[1])},this):Object.keys(a).forEach(function(b){this.set(b,a[b])},this))};n.get=function(a,b){var c=
this.contentSet.get(new this.Item(a));return c?c.value:1<arguments.length?b:this.content(a)};n.set=function(a,b){var c=new this.Item(a,b),d=this.contentSet.get(c),e=!1;d?d.value=b:this.contentSet.add(c)&&(this.length++,e=!0);return e};n.has=function(a){return this.contentSet.has(new this.Item(a))};n["delete"]=function(a){return this.contentSet["delete"](new this.Item(a))?(this.length--,!0):!1};n.clear=function(){this.contentSet.clear();this.length=0};n.reduce=function(a,b,c){return this.contentSet.reduce(function(b,
e){return a.call(c,b,e.value,e.key,this)},b,this)};n.reduceRight=function(a,b,c){return this.contentSet.reduceRight(function(b,e){return a.call(c,b,e.value,e.key,this)},b,this)};n.keys=function(){return this.map(qa)};n.values=function(){return this.map(ra)};n.items=function(){return this.map(sa)};n.Item=function(a,b){this.key=a;this.value=b};z.module$exports&&(z=z.module$exports);var w={union:function(a){var b=this.constructClone(this);b.addEach(a);return b},intersection:function(a){return this.constructClone(this.filter(function(b){return a.has(b)}))},
difference:function(a){var b=this.constructClone(this);b.deleteEach(a);return b},symmetricDifference:function(a){var b=this.union(a),a=this.intersection(a);return b.difference(a)},equals:function(a){var b=this;return Object.can(a,"reduce")&&this.length===a.length&&a.reduce(function(a,d){return a&&b.has(d)},!0)}},O={};O.module$exports=Y;Y.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"};Y.unicodeRound={intersection:"\u254b",through:"\u2501",
branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u256d",fromAbove:"\u2570",fromBoth:"\u2523",strafe:"\u2503"};Y.unicodeSharp={intersection:"\u254b",through:"\u2501",branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u250f",fromAbove:"\u2517",fromBoth:"\u2523",strafe:"\u2503"};O.module$exports&&(O=O.module$exports);var m=n={},t;if("undefined"!==typeof WeakMap)t=WeakMap;else{var aa=function(a){a.prototype=null;return Object.freeze(a)},na=Object.getOwnPropertyNames,P=Object.defineProperty,fa={};na(Object).forEach(function(a){fa[a]=
Object[a]});var V="ident:"+Math.random()+"___";"undefined"!==typeof crypto&&("function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array)&&(t=new ArrayBuffer(25),t=new Uint8Array(t),crypto.getRandomValues(t),V="rand:"+Array.prototype.map.call(t,function(a){return(a%36).toString(36)}).join("")+"___");P(Object,"getOwnPropertyNames",{value:function(a){return na(a).filter(function(a){return a!==V})}});"getPropertyNames"in Object&&P(Object,"getPropertyNames",
{value:function(a){return fa.getPropertyNames(a).filter(function(a){return a!==V})}});var I=function(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[V];if(b&&b.key===a)return b;if(fa.isExtensible(a))return b={key:a,gets:[],vals:[]},P(a,V,{value:b,writable:false,enumerable:false,configurable:false}),b},Ea=Object.freeze;P(Object,"freeze",{value:function(a){I(a);return Ea(a)}});var Fa=Object.seal;P(Object,"seal",{value:function(a){I(a);return Fa(a)}});var Ga=Object.preventExtensions;
P(Object,"preventExtensions",{value:function(a){I(a);return Ga(a)}});var ga=function(){function a(d,e){var g=I(d),r;g?(r=g.gets.indexOf(a),g=g.vals):(r=b.indexOf(d),g=c);return 0<=r?g[r]:e}var b=[],c=[];return Object.create(ga.prototype,{get___:{value:aa(a)},has___:{value:aa(function(c){var e=I(c);return 0<=(e?e.gets.indexOf(a):b.indexOf(c))})},set___:{value:aa(function(d,e){var g=I(d),r;g?(r=g.gets.indexOf(a),0<=r?g.vals[r]=e:(g.gets.push(a),g.vals.push(e))):(r=b.indexOf(d),0<=r?c[r]=e:(b.push(d),
c.push(e)))})},delete___:{value:aa(function(d){var e=I(d);e?(d=e.gets.indexOf(a),0<=d&&(e.gets.splice(d,1),e.vals.splice(d,1))):(d=b.indexOf(d),0<=d&&(b.splice(d,1),c.splice(d,1)));return true})}})};ga.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},
writable:!0,configurable:!0}});t=ga}m.module$exports=t;n.module$exports&&(n=n.module$exports);m={};t=n;m.module$exports=Object;Object.empty=Object.freeze(Object.create(null));Object.isObject=function(a){return Object(a)===a};Object.getValueOf=function(a){Object.can(a,"valueOf")&&(a=a.valueOf());return a};var ha=new t;Object.hash=function(a){return Object.can(a,"hash")?""+a.hash():Object(a)===a?(ha.has(a)||ha.set(a,Math.random().toString(36).slice(2)),ha.get(a)):""+a};var oa=Object.prototype.hasOwnProperty;
Object.owns=function(a,b){return oa.call(a,b)};Object.can=function(a,b){return null!=a&&"function"===typeof a[b]&&!oa.call(a,b)};Object.has=function(a,b){if("object"!==typeof a)throw Error("Object.has can't accept non-object: "+typeof a);if(Object.can(a,"has"))return a.has(b);if("string"===typeof b)return b in a&&a[b]!==Object.prototype[b];throw Error("Key must be a string for Object.has on plain objects");};Object.get=function(a,b,c){if("object"!==typeof a)throw Error("Object.get can't accept non-object: "+
typeof a);return Object.can(a,"get")?a.get(b,c):Object.has(a,b)?a[b]:c};Object.set=function(a,b,c){Object.can(a,"set")?a.set(b,c):a[b]=c};Object.addEach=function(a,b){Object.can(b,"forEach")?"function"===typeof b.keys?b.forEach(function(b,d){a[d]=b}):b.forEach(function(b){a[b[0]]=b[1]}):Object.keys(b).forEach(function(c){a[c]=b[c]})};Object.forEach=function(a,b,c){Object.keys(a).forEach(function(d){b.call(c,a[d],d,a)})};Object.map=function(a,b,c){return Object.keys(a).map(function(d){return b.call(c,
a[d],d,a)})};Object.values=function(a){return Object.map(a,Function.identity)};Object.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};Object.equals=function(a,b){a=Object.getValueOf(a);b=Object.getValueOf(b);return a===b?0!==a||1/a===1/b:Object.can(a,"equals")?a.equals(b):Object.can(b,"equals")?b.equals(a):a!==a&&b!==b};Object.compare=function(a,b){a=Object.getValueOf(a);b=Object.getValueOf(b);return a===b?0:"number"===typeof a&&"number"===typeof b?a-b:"string"===typeof a?a<b?-1:1:Object.can(a,
"compare")?a.compare(b):Object.can(b,"compare")?-b.compare(a):0};Object.clone=function(a,b,c){a=Object.getValueOf(a);if(void 0===b)b=Infinity;else if(0===b)return a;return c&&Object.isObject(a)&&Object.can(a,"clone")?(c.has(a)||c.set(a,a.clone(b,c)),c.get(a)):a};Object.clear=function(a){if(Object.can(a,"clear"))a.clear();else for(var b=Object.keys(a),c=b.length;c;)c--,delete a[b[c]];return a};Function.noop=function(){};Function.identity=function(a){return a};m.module$exports&&(m=m.module$exports);
var u={},ia=new n;u.getContentChangeDescriptor=function(){ia.has(this)||ia.set(this,{isActive:!1,changeListeners:[],willChangeListeners:[]});return ia.get(this)};u.addContentChangeListener=function(a,b){!this.isObservable&&this.makeObservable&&this.makeObservable();var c=this.getContentChangeDescriptor(),c=b?c.willChangeListeners:c.changeListeners;c.push(a);this.isObserved=!!c.length};u.removeContentChangeListener=function(a,b){var c=this.getContentChangeDescriptor(),c=b?c.willChangeListeners:c.changeListeners,
d=c.lastIndexOf(a);if(-1===d)throw Error("Can't remove listener: does not exist.");c.splice(d,1);this.isObserved=!!c.length};u.dispatchContentChange=function(a,b,c,d){var e=this.getContentChangeDescriptor();if(!e.isActive){e.isActive=!0;var g;g=d?e.willChangeListeners:e.changeListeners;try{g.forEach(function(e){e.handleEvent?e.handleEvent({phase:d?"before":"after",currentTarget:this,target:this,plus:a,minus:b,index:c}):(e=d?e.handleContentWillChange||e:e.handleContentChange||e,e.call&&e.call(this,
a,b,c,d))},this)}finally{e.isActive=!1}}};u.addBeforeContentChangeListener=function(a){return this.addContentChangeListener(a,!0)};u.removeBeforeContentChangeListener=function(a){return this.removeContentChangeListener(a,!0)};u.dispatchBeforeContentChange=function(a,b,c){return this.dispatchContentChange(a,b,c,!0)};var f={};m;f.addEach=function(a){if(a&&Object(a)===a)if("function"===typeof a.forEach)a.forEach(this.add,this);else if("number"===typeof a.length)for(var b=0;b<a.length;b++)this.add(a[b],
b);else Object.keys(a).forEach(function(b){this.add(a[b],b)},this)};f.deleteEach=function(a){a.forEach(function(a){this["delete"](a)},this)};f.forEach=function(a,b){return this.reduce(function(c,d,e,g,f){a.call(b,d,e,g,f)},void 0)};f.map=function(a,b){var c=[];this.reduce(function(d,e,g,f,h){c.push(a.call(b,e,g,f,h))},void 0);return c};f.toArray=function(){return this.map(ka)};f.toObject=function(){var a={};this.reduce(function(b,c,d){a[d]=c},void 0);return a};f.filter=function(a,b){var c=this.constructClone();
this.reduce(function(d,e,g,f,h){a.call(b,e,g,f,h)&&c.add(e)},void 0);return c};f.every=function(a,b){return this.reduce(function(c,d,e,g,f){return c&&a.call(b,d,e,g,f)},!0)};f.some=function(a,b){return this.reduce(function(c,d,e,g,f){return c||a.call(b,d,e,g,f)},!1)};f.all=function(){return this.every(Boolean)};f.any=function(){return this.some(Boolean)};f.min=function(a){a=this.contentCompare||Object.compare;return this.reduce(function(b,c){return 0>a(c,b)?c:b},Infinity)};f.max=function(a){a=this.contentCompare||
Object.compare;return this.reduce(function(b,c){return 0<a(c,b)?c:b},-Infinity)};f.sum=function(a){return this.reduce(ta,void 0===a?0:a)};f.average=function(a){var b=void 0===a?0:a,c=void 0===a?0:a;this.reduce(function(a,e){b+=e;c+=1},void 0);return b/c};f.concat=function(){for(var a=this.constructClone(this),b=0;b<arguments.length;b++)a.addEach(arguments[b]);return a};f.flatten=function(){return this.reduce(ua,this.constructClone())};f.zip=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this);
for(var b=[],c=Infinity,d=0;d<a.length;d++){var e=a[d];e.length<c&&(c=e.length)}for(d=0;d<a.length;d++){var g=0;a[d].reduce(function(a,e){g<c&&(b[g]=b[g]||[],b[g][d]=e);g++},void 0)}return b};f.sorted=function(a,b,c){a=a||this.contentCompare||Object.compare;a.by?(b=a.by,a=a.compare||this.contentCompare||Object.compare):b=b||ka;void 0===c&&(c=1);return this.map(function(a){return{by:b(a),value:a}}).sort(function(b,e){return a(b.by,e.by)*c}).map(function(a){return a.value})};f.reversed=function(){return this.constructClone(this).reverse()};
f.clone=function(a,b){if(void 0===a)a=Infinity;else if(0===a)return this;var c=this.constructClone();this.forEach(function(d,e){Object.clone&&(d=Object.clone(d,a-1,b));c.set(e,d)},this);return c};t={};var ja=Object.prototype.toString;Array.isArray||(Array.isArray=function(a){return"[object Array]"==ja.call(a)});Array.prototype.forEach||(Array.prototype.forEach=f.forEach);Array.prototype.map||(Array.prototype.map=f.map);Array.prototype.filter||(Array.prototype.filter=f.filter);Array.prototype.every||
(Array.prototype.every=f.every);Array.prototype.some||(Array.prototype.some=f.some);Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=toObject(this),c=b.length>>>0;if("[object Function]"!=ja.call(a))throw new TypeError(a+" is not a function");if(!c&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var d=0,e;if(2<=arguments.length)e=arguments[1];else{do{if(d in b){e=b[d++];break}if(++d>=c)throw new TypeError("reduce of empty array with no initial value");
}while(1)}for(;d<c;d++)d in b&&(e=a.call(void 0,e,b[d],d,b));return e});Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=toObject(this),c=b.length>>>0;if("[object Function]"!=ja.call(a))throw new TypeError(a+" is not a function");if(!c&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var d,c=c-1;if(2<=arguments.length)d=arguments[1];else{do{if(c in b){d=b[c--];break}if(0>--c)throw new TypeError("reduceRight of empty array with no initial value");
}while(1)}do c in this&&(d=a.call(void 0,d,b[c],c,b));while(c--);return d});Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=toObject(this),c=b.length>>>0;if(!c)return-1;var d=0;1<arguments.length&&(d=toInteger(arguments[1]));for(d=0<=d?d:Math.max(0,c+d);d<c;d++)if(d in b&&b[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){var b=toObject(this),c=b.length>>>0;if(!c)return-1;var d=c-1;1<arguments.length&&(d=Math.min(d,toInteger(arguments[1])));
for(d=0<=d?d:c-Math.abs(d);0<=d;d--)if(d in b&&a===b[d])return d;return-1});var Q={};t;m;Q.module$exports=Array;Array.empty=[];Object.freeze&&Object.freeze(Array.empty);Array.from=function(a){var b=[];b.addEach(a);return b};Array.prototype.constructClone=function(a){var b=new this.constructor;b.addEach(a);return b};Array.prototype.has=function(a,b){return-1!==this.find(a,b)};Array.prototype.get=function(a){if(+a!==a)throw Error("Indicies must be numbers");return this[a]};Array.prototype.set=function(a,
b){this.splice(a,1,b);return!0};Array.prototype.add=function(a){this.push(a);return!0};Array.prototype["delete"]=function(a,b){var c=this.find(a,b);return-1!==c?(this.splice(c,1),!0):!1};Array.prototype.find=function(a,b){for(var b=b||this.contentEquals||Object.equals,c=0;c<this.length;c++)if(c in this&&b(this[c],a))return c;return-1};Array.prototype.findLast=function(a,b){var b=b||this.contentEquals||Object.equals,c=this.length;do if(c--,c in this&&b(this[c],a))return c;while(0<c);return-1};Array.prototype.swap=
function(a,b,c){var d=Array.prototype.slice.call(arguments,0,2);c&&d.push.apply(d,c);return this.splice.apply(this,d)};Array.prototype.toArray=f.toArray;Array.prototype.toObject=f.toObject;Array.prototype.addEach=f.addEach;Array.prototype.deleteEach=f.deleteEach;Array.prototype.equals=f.equals;Array.prototype.compare=f.compare;Array.prototype.any=f.any;Array.prototype.all=f.all;Array.prototype.min=f.min;Array.prototype.max=f.max;Array.prototype.sum=f.sum;Array.prototype.average=f.average;Array.prototype.unique=
f.unique;Array.prototype.flatten=f.flatten;Array.prototype.sorted=f.sorted;Array.prototype.reversed=f.reversed;Array.prototype.clone=f.clone;Array.prototype.one=function(){if(0===this.length)throw Error("Can't get one element from empty array");return this[0]};Array.prototype.only=function(){if(1!==this.length)throw Error("Can't get only element of array with "+this.length+" elements.");return this[0]};Array.prototype.clear=function(){this.length=0;return this};Array.prototype.iterate=function(a,
b){return new ba(this,a,b)};Array.prototype.Iterator=ba;ba.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]};Q.module$exports&&(Q=Q.module$exports);var R={};m;var F=z;R.module$exports=s;Object.addEach(s.prototype,f);Object.addEach(s.prototype,F);s.prototype.constructClone=function(a){return new this.constructor(a,this.mangle,this.content)};s.prototype.assertString=function(a){if("string"!==typeof a)throw new TypeError("key must be a string.");
};s.prototype.get=function(a,b){this.assertString(a);var c="~"+a;return c in this.store?this.store[c]:1<arguments.length?b:this.content()};s.prototype.set=function(a,b){this.assertString(a);var c="~"+a;if(c in this.store)return this.store[c]=b,!1;this.length++;this.store[c]=b;return!0};s.prototype.has=function(a){this.assertString(a);return"~"+a in this.store};s.prototype["delete"]=function(a){this.assertString(a);return"~"+a in this.store?(delete this.store["~"+a],this.length--,!0):!1};s.prototype.clear=
function(){for(var a in this.store)delete this.store[a];this.length=0};s.prototype.reduce=function(a,b,c){for(var d in this.store)b=a.call(c,b,this.store[d],d.slice(1),this);return b};R.module$exports&&(R=R.module$exports);F={};F.module$exports=h;Object.addEach(h.prototype,f);h.prototype.constructClone=function(a){var b=[];f.addEach.call(b,a);return b};h.prototype.mapIterator=function(a,b){var c=h(this),d=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new c.constructor(function(){return a.call(b,
c.next(),d++,c)})};h.prototype.filterIterator=function(a,b){var c=h(this),d=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new c.constructor(function(){for(var e;;)if(e=c.next(),a.call(b,e,d++,c))return e})};h.prototype.reduce=function(a){var b=h(this),c=arguments[1],d=arguments[2],e=0,g;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;try{g=b.next(),c=1<arguments.length?a.call(d,c,g,e,b):g,e++}catch(f){if(isStopIteration(f)){if(1<
arguments.length)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value");}throw f;}try{for(;;)g=b.next(),c=a.call(d,c,g,e,b),e++}catch(i){if(isStopIteration(i))return c;throw i;}};h.prototype.every=function(a){var b=h(this),c=!0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;b.mapIterator.apply(b,arguments).forEach(function(a){if(!a)throw c=!1,StopIteration;});return c};h.prototype.some=function(a){var b=h(this),c=!1;
if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;b.mapIterator.apply(b,arguments).forEach(function(a){if(a)throw c=!0,StopIteration;});return c};h.prototype.concat=function(){return h.concat(Array.prototype.concat.apply(this,arguments))};h.prototype.dropWhile=function(a,b){var c=h(this),d=!1,e;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;c.forEach(function(g,f){if(!a.call(b,g,f,c))throw d=!0,e=g,StopIteration;});return d?c.constructor([e]).concat(c):
c.constructor([])};h.prototype.takeWhile=function(a,b){var c=h(this);if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return c.mapIterator(function(d,e){if(!a.call(b,d,e,c))throw StopIteration;return d})};h.prototype.filterIterator=function(a,b){var c=h(this),d=0;if("[object Function]"!=Object.prototype.toString.call(a))throw new TypeError;return new c.constructor(function(){for(var e;;)if(e=c.next(),a.call(b,e,d++,c))return e})};h.prototype.zip=function(){return h.transpose(Array.prototype.concat.apply(this,
arguments))};h.prototype.enumerate=function(a){return h.count(a).zip(this)};h.iterate=function(a){var b;b=0;return new h(function(){if("object"===typeof a)for(;!(b in a);){if(b>=a.length)throw StopIteration;b+=1}else if(b>=a.length)throw StopIteration;var c=a[b];b+=1;return c})};h.cycle=function(a,b){2>arguments.length&&(b=Infinity);var c=function(){throw StopIteration;};return new h(function(){var d;try{return c()}catch(e){if(isStopIteration(e)){if(0>=b)throw e;b--;d=h.iterate(a);c=d.next.bind(d);
return c()}throw e;}})};h.concat=function(a){var a=h(a),b=function(){throw StopIteration;};return new h(function(){var c;try{return b()}catch(d){if(isStopIteration(d))return c=h(a.next()),b=c.next.bind(c),b();throw d;}})};h.transpose=function(a){a=h(a).map(h);return 1>a.length?new h([]):new h(function(){var b,c=a.map(function(a){try{return a.next()}catch(c){if(isStopIteration(c))b=!0;else throw c;}});if(b)throw StopIteration;return c})};h.zip=function(){return h.transpose(Array.prototype.slice.call(arguments))};
h.chain=function(){return h.concat(Array.prototype.slice.call(arguments))};h.range=function(a,b,c){3>arguments.length&&(c=1);2>arguments.length&&(b=a,a=0);a=a||0;return new h(function(){if(a>=b)throw StopIteration;if(isNaN(a))throw"";var d=a;a+=c;return d})};h.count=function(a,b){return h.range(a,Infinity,b||1)};h.repeat=function(a,b){2>arguments.length&&(b=Infinity);return(new h.range(+b)).mapIterator(function(){return a})};"undefined"===typeof isStopIteration&&(l.isStopIteration=function(a){return"[object StopIteration]"===
Object.prototype.toString.call(a)});if("undefined"===typeof StopIteration){l.StopIteration={};var Ha=Object.prototype.toString;Object.prototype.toString=function(){return this===l.StopIteration||this instanceof l.ReturnValue?"[object StopIteration]":Ha.call(this,arguments)}}"undefined"===typeof ReturnValue&&(l.ReturnValue=function(a){if(!(this instanceof l.ReturnValue))return new l.ReturnValue(a);this.value=a});F.module$exports&&(F=F.module$exports);var J={};J.module$exports=j;m;Object.addEach(j.prototype,
f);Object.addEach(j.prototype,u);j.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.content)};j.prototype.find=function(a,b){for(var b=b||this.contentEquals,c=this.head,d=c.next;d!==c;){if(b(d.value,a))return d;d=d.next}};j.prototype.findLast=function(a,b){for(var b=b||this.contentEquals,c=this.head,d=c.prev;d!==c;){if(b(d.value,a))return d;d=d.prev}};j.prototype.has=function(a,b){return!!this.find(a,b)};j.prototype.get=function(a,b){var c=this.find(a,b);
return c?c.value:this.content()};j.prototype["delete"]=function(a,b){var c=this.findLast(a,b);return c?(this.isObserved&&this.dispatchBeforeContentChange([],[a]),c["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]),!0):!1};j.prototype.clear=function(){this.head.next=this.head.prev=this.head};j.prototype.add=function(a){this.isObserved&&this.dispatchBeforeContentChange([a],[]);this.head.addBefore(new this.Node(a));this.length++;this.isObserved&&this.dispatchContentChange([a],
[]);return!0};j.prototype.push=function(){for(var a=this.head,b=0;b<arguments.length;b++){var c=arguments[b];this.isObserved&&this.dispatchBeforeContentChange([c],[]);var d=new this.Node(c);a.addBefore(d);this.length++;this.isObserved&&this.dispatchContentChange([c],[])}};j.prototype.unshift=function(){for(var a=this.head,b=0;b<arguments.length;b++){var c=arguments[b],d=new this.Node(c);a.addAfter(d);this.length++;this.isObserved&&this.dispatchContentChange([c],[]);a=d}};j.prototype.pop=function(){var a,
b=this.head;b.prev!==b&&(a=b.prev.value,this.isObserved&&this.dispatchBeforeContentChange([],[a]),b.prev["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]));return a};j.prototype.shift=function(){var a,b=this.head;b.prev!==b&&(a=b.next.value,this.isObserved&&this.dispatchBeforeContentChange([],[a]),b.next["delete"](),this.length--,this.isObserved&&this.dispatchContentChange([],[a]));return a};j.prototype.scan=function(a,b){var c=this.head;if("number"===typeof a){var d=a;
if(0<=d)for(a=c.next;d&&!(d--,a=a.next,a==c););else for(a=c;0>d&&!(d++,a=a.prev,a==c););return a}return a||b};j.prototype.slice=function(a,b){for(var c=[],d=this.head,a=this.scan(a,d.next),b=this.scan(b,d);a!==b&&a!==d;)c.push(a.value),a=a.next;return c};j.prototype.splice=function(a,b){return this.swap(a,b,Array.prototype.slice.call(arguments,2))};j.prototype.swap=function(a,b,c){var d=[],e=a,a=this.scan(a,this.head);for(void 0===b&&(b=Infinity);b--&&0<=b&&a!==this.head;)d.push(a.value),a["delete"](),
a=a.next,this.length--;if(c){null===e&&a===this.head&&(a=this.head.next);for(b=0;b<c.length;b++)e=new this.Node(c[b]),a.addBefore(e);this.length+=c.length}return d};j.prototype.reverse=function(){var a=this.head;do{var b=a.next;a.next=a.prev;a.prev=b;a=a.next}while(a!==this.head);return this};j.prototype.reduce=function(a,b,c){for(var d=this.head,e=d.next;e!==d;)b=a.call(c,b,e.value,e,this),e=e.next;return b};j.prototype.reduceRight=function(a,b,c){for(var d=this.head,e=d.prev;e!==d;)b=a.call(c,b,
e.value,e,this),e=e.prev;return b};j.prototype.equals=function(a,b){b=b||this.contentEquals||Object.equals;return this===a?!0:this.length===a.length&&this.zip(a).every(function(a){return b(a[0],a[1])})};j.prototype.one=function(){if(this.head===this.head.next)throw Error("Can't get one value from empty list");return this.head.next.value};j.prototype.only=function(){if(this.head===this.head.next)throw Error("Can't get only value in empty list");if(this.head.prev!==this.head.next)throw Error("Can't get only value in list with multiple values");
return this.head.next.value};j.prototype.iterate=function(){return new la(this.head)};la.prototype.next=function(){if(this.at===this.head)throw StopIteration;var a=this.at.value;this.at=this.at.next;return a};j.prototype.Node=Z;Z.prototype["delete"]=function(){this.prev.next=this.next;this.next.prev=this.prev};Z.prototype.addBefore=function(a){var b=this.prev;this.prev=a;a.prev=b;b.next=a;a.next=this};Z.prototype.addAfter=function(a){var b=this.next;this.next=a;a.next=b;b.prev=a;a.prev=this};J.module$exports&&
(J=J.module$exports);var K={};m;var L=R,x=J,Ia=O,Ja=F;K.module$exports=o;Object.addEach(o.prototype,f);Object.addEach(o.prototype,w);Object.addEach(o.prototype,u);o.prototype.Buckets=L;o.prototype.Bucket=x;o.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};o.prototype.has=function(a){var b=this.contentHash(a);return this.buckets.get(b).has(a)};o.prototype.get=function(a){var b=this.contentHash(a),c=this.buckets;return c.has(b)?c.get(b).get(a):
this.content(a)};o.prototype["delete"]=function(a){var b=this.contentHash(a),c=this.buckets;if(c.has(b)){var d=c.get(b);if(d["delete"](a)){this.isObserved&&this.dispatchBeforeContentChange([],[a]);this.length--;if(0===d.length)c["delete"](b);this.isObserved&&this.dispatchContentChange([],[a]);return!0}}return!1};o.prototype.clear=function(){this.buckets.clear();this.length=0};o.prototype.add=function(a){var b=this.contentHash(a),c=this.buckets;c.has(b)||c.set(b,new this.Bucket(null,this.contentEquals));
return!c.get(b).has(a)?(this.isObserved&&this.dispatchBeforeContentChange([a],[]),c.get(b).add(a),this.length++,this.isObserved&&this.dispatchContentChange([a],[]),!0):!1};o.prototype.reduce=function(a,b,c){return this.buckets.reduce(function(b,e){return e.reduce(function(b,d){return a.call(c,b,d,d,this)},b,this)},b,this)};o.prototype.iterate=function(){var a=this.buckets,b=a.keys();return Ja.concat(b.map(function(b){return a.get(b).iterate()}))};o.prototype.log=function(a,b,c,d){a=a||Ia.unicodeSharp;
b=b||this.logNode;c||(c=console.log,d=console);var c=c.bind(d),e=this.buckets,g=e.keys();g.forEach(function(f,h){var i,j;0===h?(i=a.branchDown,j=a.strafe):h===g.length-1?(i=a.fromAbove,j=" "):(i=a.fromBoth,j=a.strafe);var k=e.get(f);c.call(d,i+a.through+a.branchDown+" "+f);k.forEach(function(e,g){var f;f=g===k.head.prev?a.fromAbove:a.fromBoth;b(e,function(b){c.call(d,j+" "+f+a.through+a.through+" "+b)},function(a){c.call(d,j+"     "+a)})})})};o.prototype.logNode=function(a,b,c){a=a.value;Object(a)===
a?b.call(c,JSON.stringify(a)):b.call(c,a)};K.module$exports&&(K=K.module$exports);L={};m;var wa=K,x=z;L.module$exports=C;Object.addEach(C.prototype,f);Object.addEach(C.prototype,x);C.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};C.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};C.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};L.module$exports&&(L=L.module$exports);
x={};m;var xa=J,ya=K;x.module$exports=p;Object.addEach(p.prototype,f);Object.addEach(p.prototype,w);Object.addEach(p.prototype,u);p.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};p.prototype.has=function(a){a=new this.contentList.Node(a);return this.contentSet.has(a)};p.prototype.get=function(a){var b=new this.contentList.Node(a);return(b=this.contentSet.get(b))?b.value:this.content(a)};p.prototype.add=function(a){var b=new this.contentList.Node(a);
return!this.contentSet.has(b)?(this.contentList.add(a),b=this.contentList.head.prev,this.contentSet.add(b),this.length++,!0):!1};p.prototype["delete"]=function(a){a=new this.contentList.Node(a);return this.contentSet.has(a)?(a=this.contentSet.get(a),this.contentSet["delete"](a),a["delete"](),this.length--,!0):!1};p.prototype.clear=function(){this.contentSet.clear();this.contentList.clear();this.length=0};p.prototype.reduce=function(a,b,c){return this.contentList.reduce(function(b,e){return a.call(c,
b,e,e,this)},b,this)};p.prototype.reduceRight=function(a,b,c){return this.contentList.reduceRight(function(b,e){return a.call(c,b,e,e,this)},b,this)};p.prototype.makeObservable=function(){var a=this;this.contentSet.addBeforeContentChangeListener(function(){a.dispatchBeforeContentChange.apply(a,arguments)});this.contentSet.addContentChangeListener(function(){a.dispatchContentChange.apply(a,arguments)});this.isObservable=!0};p.prototype.iterate=function(){return this.contentList.iterate()};p.prototype.log=
function(){var a=this.contentSet;return a.log.apply(a,arguments)};x.module$exports&&(x=x.module$exports);var S={};m;var za=x;S.module$exports=q;Object.addEach(q.prototype,f);Object.addEach(q.prototype,w);Object.addEach(q.prototype,u);q.prototype.constructClone=function(a){return new this.constructor(a,this.maxLength,this.contentEquals,this.contentHash,this.content)};q.prototype.has=function(a){return this.contentSet.has(a)};q.prototype.get=function(a){a=this.contentSet.get(a);void 0!==a?(this.contentSet["delete"](a),
this.contentSet.add(a)):a=this.content();return a};q.prototype.add=function(a){this.contentSet.has(a)&&(this.contentSet["delete"](a),this.length--);this.contentSet.add(a);this.length++;return this.contentSet.length>this.maxLength?(this.contentSet["delete"](this.contentSet.contentList.head.next.value),this.length--,!1):!0};q.prototype["delete"]=function(a){return this.contentSet["delete"](a)?(this.length--,!0):!1};q.prototype.clear=function(){this.contentSet.clear();this.length=0};q.prototype.reduce=
function(a,b,c){return this.contentSet.reduce(function(b,e){return a.call(c,b,e,e,this)},b,this)};q.prototype.reduceRight=function(a,b,c){return this.contentSet.reduceRight(function(a,b){return callback.call(c,a,b,b,this)},basis,this)};q.prototype.makeObservable=function(){var a=this;this.contentSet.addBeforeContentChangeListener(function(){a.dispatchBeforeContentChange.apply(a,arguments)});this.contentSet.addContentChangeListener(function(){a.dispatchContentChange.apply(a,arguments)});this.isObservable=
!0};q.prototype.iterate=function(){return this.contentSet.iterate()};S.module$exports&&(S=S.module$exports);var W={};m;var Aa=S,G=z;W.module$exports=D;Object.addEach(D.prototype,f);Object.addEach(D.prototype,G);D.prototype.constructClone=function(a){return new this.constructor(a,this.maxLength,this.contentEquals,this.contentHash,this.content)};D.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};D.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};
W.module$exports&&(W=W.module$exports);G={};m;var Ba=x,M=z;G.module$exports=E;Object.addEach(E.prototype,f);Object.addEach(E.prototype,M);E.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentHash,this.content)};E.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};E.prototype.stringify=function(a,b){return b+JSON.stringify(a.key)+": "+JSON.stringify(a.value)};G.module$exports&&(G=G.module$exports);var M={},ca=G;M.module$exports=
A;A.prototype=Object.create(ca.prototype);A.prototype.constructor=A;A.prototype.constructClone=function(a){return new this.constructor(a,this.bucket,this.contentEquals,this.contentHash)};A.prototype.set=function(a,b){var c=this.get(a);c.swap(0,c.length,b)};A.prototype.bucket=function(){return[]};M.module$exports&&(M=M.module$exports);var T={};T.module$exports=k;Q;m;Object.addEach(k.prototype,f);Object.addEach(k.prototype,u);k.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,
this.contentCompare,this.content)};k.prototype.has=function(a){var b=$(this.array,a,this.contentCompare);return 0<=b&&this.contentEquals(this.array[b],a)};k.prototype.get=function(a){var b=da(this.array,a,this.contentCompare,this.contentEquals);return-1!==b?this.array[b]:this.content(a)};k.prototype.add=function(a){var b;b=this.array;var c=this.contentCompare,d=$(b,a,c);if(0>d)b=-d-1;else{for(var e=b.length-1;d<e&&0===c(a,b[d+1]);)d++;b=d}this.isObserved&&this.dispatchBeforeContentChange([a],[],b);
this.array.splice(b,0,a);this.length++;this.isObserved&&this.dispatchContentChange([a],[],b);return!0};k.prototype["delete"]=function(a){var b=da(this.array,a,this.contentCompare,this.contentEquals);return-1!==b?(this.isObserved&&this.dispatchBeforeContentChange([],[a],b),this.array.splice(b,1),this.length--,this.isObserved&&this.dispatchContentChange([],[a],b),!0):!1};k.prototype.indexOf=function(a){return da(this.array,a,this.contentCompare,this.contentEquals)};k.prototype.lastIndexOf=function(a){var b=
this.array,c=this.contentCompare,d=this.contentEquals,c=$(b,a,c);if(0>c)a=-1;else{for(;c<b.length-1&&d(a,b[c+1]);)c++;a=d(a,b[c])?c:-1}return a};k.prototype.push=function(){this.addEach(arguments)};k.prototype.unshift=function(){this.addEach(arguments)};k.prototype.pop=function(){return this.array.pop()};k.prototype.shift=function(){return this.array.shift()};k.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)};k.prototype.splice=function(a,b){return this.swap(a,b,Array.prototype.slice.call(arguments,
2))};k.prototype.swap=function(a,b,c){if(void 0===a&&void 0===b)return[];a=a||0;0>a&&(a+=this.length);void 0===b&&(b=Infinity);var d=this.slice(a,a+b);this.isObserved&&this.dispatchBeforeContentChange(c,d,a);this.array.splice(a,b);this.addEach(c);this.isObserved&&this.dispatchContentChange(c,d,a);return d};k.prototype.reduce=function(a,b,c){return this.array.reduce(function(b,e,g){return a.call(c,b,e,g,this)},b,this)};k.prototype.reduceRight=function(a,b,c){return this.array.reduceRight(function(a,
b,g){return callback.call(c,a,b,g,this)},basis,this)};k.prototype.min=function(){if(this.length)return this.array[0]};k.prototype.max=function(){if(this.length)return this.array[this.length-1]};k.prototype.one=function(){return this.array.one()};k.prototype.only=function(){return this.array.only()};k.prototype.clear=function(){var a;this.isObserved&&(a=this.array.slice(),this.dispatchBeforeContentChange([],a,0));this.length=0;this.array.clear();this.isObserved&&this.dispatchContentChange([],a,0)};
k.prototype.iterate=function(a,b){return new this.Iterator(this.array,a,b)};k.prototype.Iterator=Array.prototype.Iterator;T.module$exports&&(T=T.module$exports);var U={};U.module$exports=y;m;var ea=T;y.prototype=Object.create(ea.prototype);y.prototype.constructor=y;Object.addEach(y.prototype,w);y.prototype.add=function(a){if(this.has(a))return!1;ea.prototype.add.call(this,a);return!0};y.prototype.reduce=function(a,b,c){var d=this;return this.array.reduce(function(b,g,f){return a.call(c,b,g,g,d,f)},
b)};y.prototype.reduceRight=function(a,b,c){var d=this;return this.array.reduceRight(function(b,g,f){return a.call(c,b,g,g,d,f)},b)};U.module$exports&&(U=U.module$exports);var X={};m;var Ca=U,H=z;X.module$exports=N;Object.addEach(N.prototype,f);Object.addEach(N.prototype,H);N.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};X.module$exports&&(X=X.module$exports);H={};H.module$exports=i;m;var pa=O;Object.addEach(i.prototype,f);
Object.addEach(i.prototype,w);Object.addEach(i.prototype,u);i.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};i.prototype.has=function(a){return this.root?(this.splay(a),this.contentEquals(a,this.root.value)):!1};i.prototype.get=function(a){return this.root&&(this.splay(a),this.contentEquals(a,this.root.value))?this.root.value:this.content(a)};i.prototype.add=function(a){var b=new this.Node(a);if(this.root){if(this.splay(a),
!this.contentEquals(a,this.root.value))return this.isObserved&&this.dispatchBeforeContentChange([a],[],this.root.index),0>this.contentCompare(a,this.root.value)?(b.right=this.root,b.left=this.root.left,this.root.left=null):(b.left=this.root,b.right=this.root.right,this.root.right=null),this.root.touch(),b.touch(),this.root=b,this.length++,this.isObserved&&this.dispatchContentChange([a],[],this.root.index),!0}else return this.isObserved&&this.dispatchBeforeContentChange([a],[],0),this.root=b,this.length++,
this.isObserved&&this.dispatchContentChange([a],[],0),!0;return!1};i.prototype["delete"]=function(a){if(this.root&&(this.splay(a),this.contentEquals(a,this.root.value))){var b=this.root.index;this.isObserved&&this.dispatchBeforeContentChange([],[a],b);if(this.root.left){var c=this.root.right;this.root=this.root.left;this.splay(a);this.root.right=c}else this.root=this.root.right;this.length--;this.root&&this.root.touch();this.isObserved&&this.dispatchContentChange([],[a],b);return!0}return!1};i.prototype.indexOf=
function(a){return this.root&&(this.splay(a),this.contentEquals(a,this.root.value))?this.root.index:-1};i.prototype.find=function(a){if(this.root&&(this.splay(a),this.contentEquals(a,this.root.value)))return this.root};i.prototype.findGreatest=function(a){if(this.root){for(a=a||this.root;a.right;)a=a.right;return a}};i.prototype.findLeast=function(a){if(this.root){for(a=a||this.root;a.left;)a=a.left;return a}};i.prototype.findGreatestLessThanOrEqual=function(a){if(this.root)return this.splay(a),this.root};
i.prototype.findGreatestLessThan=function(a){if(this.root)return this.splay(a),this.root.getPrevious()};i.prototype.findLeastGreaterThanOrEqual=function(a){if(this.root)return this.splay(a),0===this.contentCompare(a,this.root.value)?this.root:this.root.getNext()};i.prototype.findLeastGreaterThan=function(a){if(this.root)return this.splay(a),this.contentCompare(a,this.root.value),this.root.getNext()};i.prototype.pop=function(){if(this.root){var a=this.findGreatest();this["delete"](a.value);return a.value}};
i.prototype.shift=function(){if(this.root){var a=this.findLeast();this["delete"](a.value);return a.value}};i.prototype.push=function(){this.addEach(arguments)};i.prototype.unshift=function(){this.addEach(arguments)};i.prototype.slice=function(a,b){a=a||0;b=b||this.length;0>a&&(a+=this.length);0>b&&(b+=this.length);var c=[];if(this.root)for(this.splayIndex(a);this.root.index<b;){c.push(this.root.value);if(!this.root.right)break;this.splay(this.root.getNext().value)}return c};i.prototype.splice=function(a,
b){return this.swap(a,b,Array.prototype.slice.call(arguments,2))};i.prototype.swap=function(a,b,c){if(void 0===a&&void 0===b)return[];a=a||0;0>a&&(a+=this.length);void 0===b&&(b=Infinity);var d=[];if(this.root){this.splayIndex(a);for(a=0;a<b;a++){d.push(this.root.value);var e=this.root.getNext();this["delete"](this.root.value);if(!e)break;this.splay(e.value)}}this.addEach(c);return d};i.prototype.splay=function(a){var b,c,d,e,g,f;if(this.root){b=c=d=new this.Node;f=new this.Node;for(g=this.root;;)if(e=
this.contentCompare(a,g.value),0>e)if(g.left){if(0>this.contentCompare(a,g.left.value)&&(e=g.left,g.left=e.right,g.touch(),e.right=g,e.touch(),g=e,!g.left))break;e=new v;e.right=g;e.left=f.left;f.left=e;d.left=g;d.touch();d=g;g=g.left}else break;else if(0<e)if(g.right){if(0<this.contentCompare(a,g.right.value)&&(e=g.right,g.right=e.left,g.touch(),e.left=g,e.touch(),g=e,!g.right))break;e=new v;e.left=g;e.right=f.right;f.right=e;c.right=g;c.touch();c=g;g=g.right}else break;else break;c.right=g.left;
c.touch();d.left=g.right;d.touch();g.left=b.right;for(g.right=b.left;f.left;)f.left.right.touch(),f.left=f.left.left;for(;f.right;)f.right.left.touch(),f.right=f.right.right;g.touch();this.root=g}};i.prototype.splayIndex=function(a){if(this.root){for(var b=this.root,c=this.root.index;c!==a;)if(c>a&&b.left)b=b.left,c-=1+(b.right?b.right.length:0);else if(c<a&&b.right)b=b.right,c+=1+(b.left?b.left.length:0);else break;this.splay(b.value);return this.root.index===a}return!1};i.prototype.reduce=function(a,
b,c){this.root&&(b=this.root.reduce(a,b,c,this));return b};i.prototype.reduceRight=function(a,b,c){this.root&&(b=this.root.reduceRight(a,b,c,this));return b};i.prototype.min=function(a){if(a=this.findLeast(a))return a.value};i.prototype.max=function(a){if(a=this.findGreatest(a))return a.value};i.prototype.one=function(){if(!this.root)throw Error("Can't get one value from empty set");return this.root.value};i.prototype.only=function(){if(!this.root)throw Error("Can't get only value in empty set");
if(this.root.left||this.root.right)throw Error("Can't get only value in set with multiple values");return this.root.value};i.prototype.clear=function(){var a;this.isObserved&&(a=this.toArray(),this.dispatchBeforeContentChange([],a,0));this.root=null;this.length=0;this.isObserved&&this.dispatchContentChange([],a,0)};i.prototype.iterate=function(a,b){return new this.Iterator(this,a,b)};i.prototype.Iterator=ma;i.prototype.summary=function(){return this.root?this.root.summary():"()"};i.prototype.log=
function(a,b,c,d){a=a||pa.unicodeRound;b=b||this.logNode;c||(c=console.log,d=console);c=c.bind(d);this.root&&this.root.log(a,b,c,c)};i.prototype.logNode=function(a,b){b(" "+a.value)};i.logCharsets=pa;i.prototype.Node=v;v.prototype.reduce=function(a,b,c,d,e){e=e||0;this.left&&(b=this.left.reduce(a,b,c,d,e+1));b=a.call(c,b,this.value,this.value,d,this,e);this.right&&(b=this.right.reduce(a,b,c,d,e+1));return b};v.prototype.reduceRight=function(a,b,c,d,e){e=e||0;this.right&&(b=this.right.reduce(a,b,c,
d,e+1));b=a.call(c,b,this.value,this.value,d,this,e);this.left&&(b=this.left.reduce(a,b,c,d,e+1));return b};v.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0);this.index=this.left?this.left.length:0};v.prototype.checkIntegrity=function(){var a;a=1+(this.left?this.left.checkIntegrity():0);a+=this.right?this.right.checkIntegrity():0;if(this.length!==a)throw Error("Integrity check failed: "+this.summary());return a};v.prototype.getNext=function(){var a=
this;if(a.right){for(a=a.right;a.left;)a=a.left;return a}};v.prototype.getPrevious=function(){var a=this;if(a.left){for(a=a.left;a.right;)a=a.right;return a}};v.prototype.summary=function(){var a=this.value||"-",a=a+(" <"+this.length);return!this.left&&!this.right?"("+a+")":"("+a+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")"};v.prototype.log=function(a,b,c,d){var e=this,g;g=this.left&&this.right?a.intersection:this.left?a.branchUp:this.right?a.branchDown:
a.through;var f;this.left&&this.left.log(a,b,function(b){f?d(a.strafe+" "+b):(f=!0,d(a.fromBelow+a.through+b))},function(a){d("  "+a)});var h;b(this,function(b){h?c((e.right?a.strafe:" ")+b):(h=!0,c(g+b))},function(b){d((e.left?a.strafe:" ")+b)});var i;this.right&&this.right.log(a,b,function(b){i?c("  "+b):(i=!0,c(a.fromAbove+a.through+b))},function(b){c(a.strafe+" "+b)})};ma.prototype.next=function(){var a;a=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast();if(!a)throw StopIteration;
if(void 0!==this.end&&0<=this.set.contentCompare(a.value,this.end))throw StopIteration;this.prev=a;return a.value};H.module$exports&&(H=H.module$exports);w={};m;var Da=H;w.module$exports=B;Object.addEach(B.prototype,f);Object.addEach(B.prototype,z);B.prototype.constructClone=function(a){return new this.constructor(a,this.contentEquals,this.contentCompare,this.content)};B.prototype.log=function(a,b){b=b||this.stringify;this.contentSet.log(a,b)};B.prototype.report=function(a,b,c,d){d=d||this.stringify;
this.contentSet.report(a,b,c,d)};B.prototype.stringify=function(a,b,c,d){a.call(b,d+" "+c.value.key+": "+c.value.value)};w.module$exports&&(w=w.module$exports);t;Q;l.List=J;l.Set=x;l.Map=G;l.MultiMap=M;l.WeakMap=n;l.SortedSet=H;l.SortedMap=w;l.LruSet=S;l.LruMap=W;l.SortedArray=T;l.SortedArraySet=U;l.SortedArrayMap=X;l.FastSet=K;l.FastMap=L;l.Dict=R;l.Iterator=F})(this);
